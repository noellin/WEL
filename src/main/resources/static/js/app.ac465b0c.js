(function(t){function e(e){for(var i,o,n=e[0],l=e[1],c=e[2],h=0,d=[];h<n.length;h++)o=n[h],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(e);while(d.length)d.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],i=!0,n=1;n<a.length;n++){var l=a[n];0!==r[l]&&(i=!1)}i&&(s.splice(e--,1),t=o(o.s=a[0]))}return t}var i={},r={app:0},s=[];function o(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=i,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(a,i,function(e){return t[e]}.bind(null,i));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"057e":function(t,e,a){},"14b8":function(t,e,a){},"1ce1":function(t,e,a){"use strict";var i=a("14b8"),r=a.n(i);r.a},"21e5":function(t,e,a){t.exports=a.p+"img/WorldLibrary_NEWLogo_Banner.ebae0f48.png"},4678:function(t,e,a){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(t){var e=s(t);return a(e)}function s(t){if(!a.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=s,t.exports=r,r.id="4678"},5338:function(t,e,a){"use strict";var i=a("5497"),r=a.n(i);r.a},5497:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("6b54"),a("cadf"),a("551c"),a("f751"),a("097d");var i=a("2b0e"),r=a("f23d"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},o=[],n={name:"app",components:{}},l=n,c=(a("5c0b"),a("2877")),u=Object(c["a"])(l,s,o,!1,null,null,null),h=u.exports,d=a("8c4f"),p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-layout",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}}},[i("a-layout-header",{staticClass:"top-header"},[i("a-row",{staticClass:"top-header",attrs:{type:"flex",align:"middle",justify:"space-between"}},[i("a-col",{attrs:{span:6,sm:6,xs:4}},[i("img",{staticClass:"header-image",attrs:{src:a("c6d2")},on:{click:function(e){return t.goBrowsePage()}}})]),i("a-col",{attrs:{span:18,sm:18,xs:0}},[i("a-row",{attrs:{type:"flex",justify:"end"}},[i("span",{staticClass:"control-icon control-current",on:{click:function(e){return t.goBrowsePage()}}},[i("a-icon",{attrs:{type:"unordered-list"}}),t._v("\n            Browse\n          ")],1),i("span",{staticClass:"control-icon ",on:{click:function(e){return t.goSearchPage()}}},[i("a-icon",{attrs:{type:"search"}}),t._v("\n            Search\n          ")],1),i("span",{staticClass:"control-icon",on:{click:function(e){return t.handleOrganizationInfo()}}},[i("a-icon",{attrs:{type:"bank",title:"Institution Information"}}),t._v("\n            Institution\n          ")],1),i("span",{staticClass:"control-icon",on:{click:function(e){return t.logout()}}},[i("a-icon",{attrs:{type:"logout"}}),t._v("\n            Log out\n          ")],1)])],1),i("a-col",{attrs:{xs:20,sm:0}},[i("a-row",{attrs:{type:"flex",justify:"end"}},[i("a-button",{staticClass:"menu-icon",on:{click:t.showDrawer}},[i("a-icon",{attrs:{type:"menu"}})],1)],1)],1),i("a-drawer",{staticStyle:{"font-size":"22px"},attrs:{title:"WorldLibrary",placement:t.placement,closable:!1,visible:t.visible},on:{close:t.showDrawer}},[i("p",{staticClass:"control-icon control-current",on:{click:function(e){return t.goBrowsePage()}}},[i("a-icon",{attrs:{type:"unordered-list"}}),t._v("\n          Browse\n        ")],1),i("p",{staticClass:"control-icon ",on:{click:function(e){return t.goSearchPage()}}},[i("a-icon",{attrs:{type:"search"}}),t._v("\n          Search\n        ")],1),i("p",{staticClass:"control-icon",on:{click:function(e){return t.handleOrganizationInfo()}}},[i("a-icon",{attrs:{type:"bank",title:"Institution Information"}}),t._v("\n          Institution\n        ")],1),i("p",{staticClass:"control-icon",on:{click:function(e){return t.logout()}}},[i("a-icon",{attrs:{type:"logout"}}),t._v("\n          Log out\n        ")],1)])],1)],1),i("a-layout",[i("a-layout-header",{staticClass:"search-header"},["*"==t.collection?i("a-row",[i("a-col",{staticStyle:{"text-align":"right","padding-right":"10px"},attrs:{xs:2,sm:6,md:6}}),i("a-col",{attrs:{xs:14,sm:12,md:12}},[i("a-auto-complete",{staticStyle:{width:"100%"},attrs:{placeholder:"Search Books ..."},model:{value:t.querytemp,callback:function(e){t.querytemp=e},expression:"querytemp"}})],1),i("a-col",{attrs:{xs:8,sm:6,md:6}},[i("a-button",{staticStyle:{"margin-left":"12px"},attrs:{type:"dashed",shape:"circle",icon:"search",title:"Search by keyword",size:t.size},on:{click:t.search}}),i("a-button",{staticStyle:{"margin-left":"12px"},attrs:{type:"dashed",shape:"circle",icon:"setting",title:"Advanced Search",size:t.size},on:{click:t.switchAdvance}})],1),i("a-modal",{attrs:{title:"Advanced Search"},model:{value:t.advance,callback:function(e){t.advance=e},expression:"advance"}},[i("template",{slot:"footer"},[i("a-button",{key:"reset",on:{click:t.resetAdvanceSearch}},[t._v("Reset")]),i("a-button",{key:"submit",attrs:{type:"primary"},on:{click:t.executeAdvanceSearch}},[t._v("\n              Search\n            ")])],1),t._l(t.searchFieldNum,(function(e,a){return i("div",[i("a-row",{staticStyle:{"margin-top":"5px"}},[i("span",{staticStyle:{width:"100px"}},[i("a-select",{staticStyle:{width:"100px"},attrs:{defaultValue:t.searchFieldValue[0]},on:{change:function(e){return t.updateSearchField(e,a)}},model:{value:t.searchFieldField[a],callback:function(e){t.$set(t.searchFieldField,a,e)},expression:"searchFieldField[findex]"}},t._l(t.searchFieldValue,(function(e,a){return i("a-select-option",{key:e},[t._v(t._s(t.searchFieldName[a]))])})),1)],1),i("span",{staticStyle:{width:"calc(100% - 180px)"}},[i("a-auto-complete",{ref:a+"_keyword",refInFor:!0,staticStyle:{width:"calc(100% - 180px)"},attrs:{placeholder:"Enter Keyword ..."},model:{value:t.searchFieldContent[a],callback:function(e){t.$set(t.searchFieldContent,a,e)},expression:"searchFieldContent[findex]"}})],1),i("span",{staticStyle:{width:"80px"}},[a<t.searchFieldNum-1?i("a-select",{staticStyle:{width:"80px"},attrs:{defaultValue:t.searchBool[0]},on:{change:function(e){return t.updateSearchBool(e,a)}},model:{value:t.searchFieldBool[a],callback:function(e){t.$set(t.searchFieldBool,a,e)},expression:"searchFieldBool[findex]"}},t._l(t.searchBool,(function(e,a){return i("a-select-option",{key:e},[t._v(t._s(e))])})),1):t._e()],1)])],1)})),i("div",{staticStyle:{"text-align":"right"}},[i("a-button",{staticStyle:{"margin-top":"10px","margin-right":"15px"},attrs:{type:"dashed",shape:"circle",icon:"plus",title:"Add Search Row",size:t.size},on:{click:t.addSearchRow}})],1),i("a-divider"),i("div",[i("a-row",[t._v("\n              Publication Year : \n              "),i("a-input-number",{attrs:{placeholder:"Start Year",step:"10"},model:{value:t.searchFieldStart,callback:function(e){t.searchFieldStart=e},expression:"searchFieldStart"}}),t._v("\n               - \n              "),i("a-input-number",{attrs:{placeholder:"End Year",step:"10"},model:{value:t.searchFieldEnd,callback:function(e){t.searchFieldEnd=e},expression:"searchFieldEnd"}})],1)],1)],2)],1):t._e(),"*"!=t.collection?i("a-row",[i("a-col",{staticClass:"header-title",attrs:{sm:18,xs:14}},[i("span",{staticClass:"header-back",on:{click:t.resetSelection}},[i("a-icon",{staticStyle:{"margin-right":"10px"},attrs:{type:"left"}}),t._v(t._s(this.collection)+"\n          ")],1),1==t.filterSearch?i("span",{staticStyle:{"margin-left":"25px"}},[i("a",{on:{click:t.resetSubSelection}},[i("a-icon",{attrs:{type:"reload"}}),t._v(" Reset Search")],1)]):t._e()]),i("a-col",{attrs:{sm:6,xs:10}},[i("a-input-search",{attrs:{placeholder:"Filter by keyword ...",size:"small"},on:{search:t.filterSubCategory},model:{value:t.filterStr,callback:function(e){t.filterStr=e},expression:"filterStr"}})],1)],1):t._e()],1),"*"==t.collection?i("a-row",[i("a-col",{staticClass:"browse-banner-section",attrs:{span:24}},[i("img",{staticClass:"browse-banner-image",attrs:{src:a("21e5")}})])],1):t._e(),i("a-layout-content",{staticClass:"main-content"},["*"!=t.collection?i("a-row",{attrs:{type:"flex",justify:"center"}},[i("a-col",{attrs:{span:1}}),i("a-col",{attrs:{span:22}},[t.searching?i("a-col",{ref:"searchheader",staticClass:"collection-title",attrs:{span:11}},[i("a-spin",{attrs:{size:"large"}}),i("span",{staticStyle:{color:"#85C1E9","margin-left":"15px"}},[t._v("Loading the information, please wait ...\n            ")])],1):t._e(),t.searching?t._e():i("a-tabs",{attrs:{defaultActiveKey:"1"}},[t.contributorFilter.length>0?i("a-tab-pane",{key:"1",attrs:{tab:"Contributor"}},[0==t.searching&&0==t.filterSearch?i("a-col",{staticStyle:{"margin-left":"10px","margin-bottom":"25px"},attrs:{span:24}},[t._v("\n                Display top "+t._s(t.contributorFilter.length)+" contributor(s)\n              ")]):t._e(),0==t.searching&&1==t.filterSearch?i("a-col",{staticStyle:{"margin-left":"10px","margin-bottom":"25px"},attrs:{span:24}},[t._v("\n                Display top "+t._s(t.contributorFilter.length)+" matched\n                contributor(s)\n              ")]):t._e(),i("a-list",{attrs:{grid:{gutter:10,xs:1,sm:2,md:4,lg:6},dataSource:t.contributorFilter},scopedSlots:t._u([{key:"renderItem",fn:function(e,a){return i("a-list-item",{},[i("div",{staticClass:"sub-category"},[i("a-col",{staticClass:"sub-category-count",attrs:{span:24},on:{click:function(a){return t.searchSubCategory("contributor",e.title)}}},[i("a-icon",{attrs:{type:"search"}}),t._v("\n                      Total: "),i("span",[t._v(t._s(t._f("commas")(e.count)))])],1),i("a-col",{staticClass:"sub-category-title",attrs:{title:e.title,span:24}},[t._v("\n                      "+t._s(e.title)+"\n                    ")])],1)])}}],null,!1,4187859581)}),0==t.filterSearch&&t.contributorFilter.length>0&&t.contributorFilter.length<this.Data.contributor.length?i("a-col",{staticClass:"filterMore",staticStyle:{"text-align":"center"},attrs:{span:24},on:{click:t.loadMoreContributor}},[t._v("Load More Records ...")]):t._e()],1):t._e(),t.publisherFilter.length>0?i("a-tab-pane",{key:"2",attrs:{tab:"Publisher"}},[0==t.filterSearch?i("a-col",{staticStyle:{"margin-left":"10px","margin-bottom":"25px"},attrs:{span:24}},[t._v("\n                Display top "+t._s(t.publisherFilter.length)+" publisher(s)\n              ")]):t._e(),1==t.filterSearch?i("a-col",{staticStyle:{"margin-left":"10px","margin-bottom":"25px"},attrs:{span:24}},[t._v("\n                Display top "+t._s(t.publisherFilter.length)+" matched publisher(s)\n              ")]):t._e(),i("a-list",{attrs:{grid:{gutter:10,xs:1,sm:2,md:4,lg:6},dataSource:t.publisherFilter},scopedSlots:t._u([{key:"renderItem",fn:function(e,a){return i("a-list-item",{},[i("div",{staticClass:"sub-category"},[i("a-col",{staticClass:"sub-category-count",attrs:{span:24},on:{click:function(a){return t.searchSubCategory("publisher",e.title)}}},[i("a-icon",{attrs:{type:"search"}}),t._v("\n                      Total: "),i("span",[t._v(t._s(t._f("commas")(e.count)))])],1),i("a-col",{staticClass:"sub-category-title",attrs:{title:e.title,span:24}},[t._v("\n                      "+t._s(e.title)+"\n                    ")])],1)])}}],null,!1,3302605120)}),0==t.filterSearch&&t.publisherFilter.length>0&&t.publisherFilter.length<this.Data.publisher.length?i("a-col",{staticClass:"filterMore",staticStyle:{"text-align":"center"},attrs:{span:24},on:{click:t.loadMorePublisher}},[t._v("Load More Records ...")]):t._e()],1):t._e(),t.subjectFilter.length>0?i("a-tab-pane",{key:"3",attrs:{tab:"Subject"}},[0==t.filterSearch?i("a-col",{staticStyle:{"margin-left":"10px","margin-bottom":"25px"},attrs:{span:24}},[t._v("\n                Display top "+t._s(t.subjectFilter.length)+" subject(s)\n              ")]):t._e(),1==t.filterSearch?i("a-col",{staticStyle:{"margin-left":"10px","margin-bottom":"25px"},attrs:{span:24}},[t._v("\n                Display top "+t._s(t.subjectFilter.length)+" matched subject(s)\n              ")]):t._e(),i("a-list",{attrs:{grid:{gutter:10,xs:1,sm:2,md:4,lg:6},dataSource:t.subjectFilter},scopedSlots:t._u([{key:"renderItem",fn:function(e,a){return i("a-list-item",{},[i("div",{staticClass:"sub-category"},[i("a-col",{staticClass:"sub-category-count",attrs:{span:24},on:{click:function(a){return t.searchSubCategory("subject",e.title)}}},[i("a-icon",{attrs:{type:"search"}}),t._v("\n                      Total: "),i("span",[t._v(t._s(t._f("commas")(e.count)))])],1),i("a-col",{staticClass:"sub-category-title",attrs:{title:e.title,span:24}},[t._v("\n                      "+t._s(e.title)+"\n                    ")])],1)])}}],null,!1,828629618)}),0==t.filterSearch&&t.subjectFilter.length>0&&t.subjectFilter.length<this.Data.subject.length?i("a-col",{staticClass:"filterMore",staticStyle:{"text-align":"center"},attrs:{span:24},on:{click:t.loadMoreSubject}},[t._v("Load More Records ...")]):t._e()],1):t._e(),t.languageFilter.length>0?i("a-tab-pane",{key:"4",attrs:{tab:"Language"}},[0==t.filterSearch?i("a-col",{staticStyle:{"margin-left":"10px","margin-bottom":"25px"},attrs:{span:24}},[t._v("\n                Display top "+t._s(t.languageFilter.length)+" language(s)\n              ")]):t._e(),1==t.filterSearch?i("a-col",{staticStyle:{"margin-left":"10px","margin-bottom":"25px"},attrs:{span:24}},[t._v("\n                Display top "+t._s(t.languageFilter.length)+" matched language(s)\n              ")]):t._e(),i("a-list",{attrs:{grid:{gutter:10,xs:1,sm:2,md:4,lg:6},dataSource:t.languageFilter},scopedSlots:t._u([{key:"renderItem",fn:function(e,a){return i("a-list-item",{},[i("div",{staticClass:"sub-category"},[i("a-col",{staticClass:"sub-category-count",attrs:{span:24},on:{click:function(a){return t.searchSubCategory("language",e.title)}}},[i("a-icon",{attrs:{type:"search"}}),t._v("\n                      Total: "),i("span",[t._v(t._s(t._f("commas")(e.count)))])],1),i("a-col",{staticClass:"sub-category-title",attrs:{title:e.title,span:24}},[t._v("\n                      "+t._s(e.title)+"\n                    ")])],1)])}}],null,!1,2961341372)}),0==t.filterSearch&&t.subjectFilter.length>0&&t.subjectFilter.length<this.Data.subject.length?i("a-col",{staticClass:"filterMore",staticStyle:{"text-align":"center"},attrs:{span:24},on:{click:t.loadMoreLanguage}},[t._v("Load More Records ...")]):t._e()],1):t._e()],1)],1),i("a-col",{attrs:{span:1}})],1):t._e(),"*"==t.collection?i("a-row",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"flex",justify:"center"}},[i("a-col",{attrs:{sm:1,xs:1}}),i("a-col",{staticClass:"collection-title collection-option",attrs:{xs:0,sm:11}},[i("a-button",{attrs:{type:"dashed",shape:"circle",icon:"appstore",title:"Grid View",size:t.size},on:{click:t.switchGridView}}),i("span",{class:[t.showcase?"switch-showcase-item":"switch-showcase-item-selected"],on:{click:t.switchGridView}},[t._v("Grid View")]),i("a-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"dashed",shape:"circle",icon:"read",title:"Showcase",size:t.size},on:{click:t.switchCarouselView}}),i("span",{class:[t.showcase?"switch-showcase-item-selected":"switch-showcase-item"],staticStyle:{"margin-left":"2px"},on:{click:t.switchCarouselView}},[t._v("Showcase")])],1),i("a-col",{attrs:{xs:8,sm:8}}),i("a-col",{staticClass:"collection-period",staticStyle:{"text-align":"right"},attrs:{xs:0,sm:3}},[i("a-input-search",{attrs:{placeholder:"Search Collections ..."},on:{search:t.browseSearch},model:{value:t.querytempCollection,callback:function(e){t.querytempCollection=e},expression:"querytempCollection"}})],1),i("a-col",{staticClass:"collection-period",attrs:{xs:24,sm:0}},[i("a-input-search",{attrs:{placeholder:"Search Collections ..."},on:{search:t.browseSearch},model:{value:t.querytempCollection,callback:function(e){t.querytempCollection=e},expression:"querytempCollection"}})],1),i("a-col",{attrs:{sm:0,xs:1}}),i("a-col",{attrs:{sm:0,xs:1}}),i("a-col",{staticClass:"collection-title m-collection-title",attrs:{xs:24,sm:0}},[i("a-button",{attrs:{type:"dashed",shape:"circle",icon:"appstore",title:"Grid View",size:t.size},on:{click:t.switchGridView}}),i("span",{class:[t.showcase?"switch-showcase-item":"switch-showcase-item-selected"],on:{click:t.switchGridView}},[t._v("Grid View")]),i("a-button",{attrs:{type:"dashed",shape:"circle",icon:"read",title:"Showcase",size:t.size},on:{click:t.switchCarouselView}}),i("span",{class:[t.showcase?"switch-showcase-item-selected":"switch-showcase-item"],on:{click:t.switchCarouselView}},[t._v("Showcase")])],1),i("a-col",{attrs:{sm:1,xs:1}})],1):t._e(),"*"==t.collection?i("a-row",{attrs:{type:"flex",justify:"center"}},[i("a-col",{attrs:{span:1,xs:0}}),t.searching?i("a-col",{ref:"searchheader",staticClass:"collection-title",staticStyle:{"margin-left":"10px"},attrs:{sm:11,xs:24}},[i("a-spin",{attrs:{size:"large"}}),i("span",{staticStyle:{color:"#85C1E9","margin-left":"15px"}},[t._v("Loading the collections, please wait ...\n          ")])],1):t._e(),t.searching||0!=t.submitsearching?t._e():i("a-col",{staticStyle:{"margin-left":"10px"},attrs:{sm:11,xs:24}},[t._v("\n          Display top "+t._s(t.collectionFilter.length)+" collection(s)\n        ")]),t.searching||1!=t.submitsearching?t._e():i("a-col",{staticStyle:{"margin-left":"10px"},attrs:{sm:11,xs:24}},[t._v("\n          Found "+t._s(t.collectionFilter.length)+" matched collection(s)\n          "),i("span",{staticStyle:{"margin-left":"25px"}},[i("a",{on:{click:function(e){return t.reset()}}},[i("a-icon",{attrs:{type:"reload"}}),t._v(" Reset Search")],1)])]),i("a-col",{staticClass:"collection-period",staticStyle:{"text-align":"right"},attrs:{sm:11,xs:24}}),i("a-col",{attrs:{span:1,xs:0}})],1):t._e(),0==t.searching&&"*"==t.collection?i("a-row",{staticClass:"collection-section"},[i("a-col",{attrs:{xs:1,sm:1,md:1}}),1==t.showcase?i("a-col",{staticClass:"showcase-section",attrs:{xs:24,sm:22,md:22}},[i("a-list",{attrs:{itemLayout:"horizontal",dataSource:t.collectionFilter},scopedSlots:t._u([{key:"renderItem",fn:function(e,a){return i("a-list-item",{},[t.searching?t._e():i("div",[i("a-col",{staticClass:"category-count",attrs:{span:24},on:{click:function(a){return t.searchCollection(e.title)}}},[i("a-icon",{attrs:{type:"search"}}),t._v("\n                  Total: "),i("span",[t._v(t._s(t._f("commas")(e.count)))])],1),i("a-col",{staticClass:"category-title",attrs:{title:e.title,span:24},on:{click:function(a){return t.applyFilter("collection",e.title)}}},[t._v("\n                  "+t._s(e.title)+"\n                ")]),e.docs.length>0?i("a-col",{staticStyle:{width:"100%","margin-top":"15px"},attrs:{span:24}},[i("carousel",{staticStyle:{width:"100%"},attrs:{perPageCustom:[[1140,3.75],[960,10],[720,10],[540,6]],autoplayTimeout:15e3,autoplayHoverPause:!0,paginationEnabled:!1,"mouse-drag":!0,"min-swipe-distance":1,scrollPerPage:!1}},t._l(e.docs,(function(e,a){return i("slide",{key:e.id},[i("img",{staticClass:"showcase-cover-size",attrs:{title:e.title,src:t.updateImageUrl(e.image),sm:16,xs:24},on:{click:function(a){return t.detail(e.id)}}})])})),1)],1):t._e()],1)])}}],null,!1,3310574066)}),0==t.searching&&t.collectionFilter.length>0&&t.collectionFilter.length<t.Data.collection.length?i("a-col",{staticClass:"filterMore",staticStyle:{"text-align":"center"},attrs:{span:24},on:{click:t.loadMoreCollection}},[t._v("Load More Records ...")]):t._e()],1):t._e(),0==t.showcase?i("a-col",{attrs:{xs:24,sm:22,md:22}},[i("a-list",{attrs:{grid:{gutter:10,xs:1,sm:2,md:4,lg:6},dataSource:t.collectionFilter},scopedSlots:t._u([{key:"renderItem",fn:function(e,a){return i("a-list-item",{},[t.searching?i("div",{staticClass:"record-skeleton"},[[i("a-skeleton")]],2):t._e(),t.searching?t._e():i("div",{staticClass:"category"},[i("a-col",{staticClass:"category-count",attrs:{span:24},on:{click:function(a){return t.searchCollection(e.title)}}},[i("a-icon",{attrs:{type:"search"}}),t._v("\n                  Total: "),i("span",[t._v(t._s(t._f("commas")(e.count)))])],1),i("a-col",{staticClass:"category-title",attrs:{title:e.title,span:24},on:{click:function(a){return t.applyFilter("collection",e.title)}}},[t._v("\n                  "+t._s(e.title)+"\n                ")])],1)])}}],null,!1,2872847025)}),0==t.searching&&t.collectionFilter.length>0&&t.collectionFilter.length<t.Data.collection.length?i("a-col",{staticClass:"filterMore",staticStyle:{"text-align":"center"},attrs:{span:24},on:{click:t.loadMoreCollection}},[t._v("Load More Records ...")]):t._e()],1):t._e(),i("a-col",{attrs:{xs:1,sm:1,md:1}})],1):t._e()],1),i("a-layout-footer",{staticClass:"main-footer"},[i("div",{attrs:{align:"center"}},[t._v("\n        Copyright © 2020 World Library. All rights reserved.\n      ")])]),i("go-top",[i("div",{staticClass:"top"},[t._v("Go Top")])])],1)],1)},g=[],f=(a("55dd"),a("386d"),a("28a5"),a("a481"),a("27ae").Base64),m=[],y=[],v=[],b=[],_=[],w=[],x=[],S=[],k=(new Date).getFullYear(),C={data:function(){return{organization:{},filterSearch:!1,filterStr:"",currentYear:k,submitsearching:!1,searching:!1,maxyear:0,minyear:0,sort:"",format:"*",year:"*",language:"*",collection:"*",collectionCount:"",publisher:"*",subject:"*",contributor:"*",currentpage:1,start:1,rows:10,end:10,query:"*",querytemp:"",querytempCollection:"",previousconfirmquery:"",Data:m,size:"small",formatFilter:y,yearFilter:v,languageFilter:b,collectionFilter:_,publisherFilter:w,subjectFilter:x,contributorFilter:S,filtersize:500,subFiltersize:10,suggestionTimer:"",dataSource:[],dataOpen:!1,advance:!1,searchFieldNum:3,searchFieldName:["Any","Title","Author","Publisher","Description"],searchFieldValue:["*","title","icontributor","ipublisher","description"],searchBool:["AND","OR","NOT"],searchFieldContent:["","",""],searchFieldField:["*","*","*"],searchFieldBool:["AND","AND","AND"],searchFieldStart:"",searchFieldEnd:"",showcase:!1,visible:!1,placement:"left"}},methods:{handleOrganizationInfo:function(){var t=this,e=this.$createElement;this.$info({title:"Institution Information",content:e("div",{},[e("p",t.organization.organization),e("p",t.organization.ip)]),onOk:function(){}})},updateCollectionShowcase:function(){for(var t=0;t<this.collectionFilter.length;t++)if(0==this.collectionFilter[t].docs.length){this.retrieveCollectionShowcase(t,this.encode(this.collectionFilter[t].title));break}},retrieveCollectionShowcase:function(t,e){var a=this,i=this.portal+"/data/showcase/"+e+"?r=20",r="";void 0!=this.organization.index&&(r=this.organization.index),this.$axios.get(i,{headers:{Authorization:"Bearer "+a.$localStorage.get("token"),index:r}}).then((function(e){var i=a.collectionFilter[t];i.docs=e.data,a.$set(a.collectionFilter,t,i)})).catch((function(t){console.log(t)})).finally((function(){setTimeout((function(){a.updateCollectionShowcase()}),1e3)}))},switchCarouselView:function(){this.collection="*",this.showcase=!0},switchGridView:function(){this.collection="*",this.showcase=!1},switchAdvance:function(){if(this.advance=!this.advance,this.advance&&""!=this.querytemp.trim()){this.querytemp=this.querytemp.trim();while(-1!=this.querytemp.indexOf("  "))this.querytemp=this.querytemp.replace("  "," ");this.querytemp=this.querytemp.replace(/ AND /g,"#AND#"),this.querytemp=this.querytemp.replace(/ OR /g,"#OR#"),this.querytemp=this.querytemp.replace(/ NOT /g,"#NOT#"),this.querytemp=this.querytemp.replace(/: /g,":"),this.querytemp=this.querytemp.replace(/ :/g,":"),this.querytemp=this.querytemp.replace(/title:/gi,"title:"),this.querytemp=this.querytemp.replace(/icontributor:/gi,"icontributor:"),this.querytemp=this.querytemp.replace(/ipublisher:/gi,"ipublisher:"),this.querytemp=this.querytemp.replace(/description:/gi,"description:"),this.querytemp=this.querytemp.replace(/ /g,"+"),this.querytemp=this.querytemp.replace(/#/g," ");for(var t=this.querytemp.split(" "),e=1,a=0;a<t.length;a++){var i=t[a];"AND"!=i&&"OR"!=i&&"NOT"!=i||(e+=1)}this.resetAdvanceSearch();while(this.searchFieldNum<e)this.addSearchRow();var r=0,s=0,o=0;for(a=0;a<t.length;a++){i=t[a];if("AND"==i||"OR"==i||"NOT"==i)this.searchFieldBool[o]=i,o+=1;else if(-1!=i.indexOf(":")){var n=i.split(":")[0],l=i.split(":")[1];if("year"==n&&-1!=l.indexOf("[")&&-1!=l.indexOf("]")&&-1!=l.indexOf("TO")){l=l.replace("["," "),l=l.replace("]"," "),l=l.replace(/\+/g," "),l=l.trim();var c=l.split("TO")[0];c=c.trim();try{var u=parseInt(c);this.searchFieldStart=u}catch(p){}var h=l.split("TO")[1];h=h.trim();try{var d=parseInt(h);this.searchFieldEnd=d}catch(p){}}else l=l.replace(/\+/g," "),l=l.replace(/"/g,""),this.searchFieldField[r]=n,this.searchFieldContent[s]=l,r+=1,s+=1}else i=i.replace(/\+/g," "),i=i.replace(/"/g,""),this.searchFieldField[r]="*",this.searchFieldContent[s]=i,r+=1,s+=1}}},addSearchRow:function(){this.searchFieldContent[this.searchFieldNum]="",this.searchFieldField[this.searchFieldNum]="*",this.searchFieldBool[this.searchFieldNum]="AND",this.searchFieldNum+=1},resetAdvanceSearch:function(){this.searchFieldNum=3,this.searchFieldContent=["","",""],this.searchFieldField=["*","*","*"],this.searchFieldBool=["AND","AND","AND"],this.searchFieldStart="",this.searchFieldEnd=""},updateSearchField:function(t,e){this.searchFieldField[e]=t},updateSearchBool:function(t,e){this.searchFieldBool[e]=t},executeAdvanceSearch:function(){for(var t="",e=[],a=[],i=0;i<this.searchFieldNum;i++){var r=this.searchFieldContent[i];if(void 0!=r&&""!=r.trim()){-1!=r.indexOf(" ")&&(r='"'+r.trim()+'"');var s=this.searchFieldField[i];"*"==s?s="":s+=":",e.push(s+r);var o=this.searchFieldBool[i];a.push(o)}}for(var n=0;n<e.length;n++)t+=0==n?e[n]+" ":a[n-1]+" "+e[n]+" ";this.querytemp=t.trim(),void 0!=this.searchFieldStart&&this.searchFieldStart>0&&(void 0==this.searchFieldEnd||""==this.searchFieldEnd||0==this.searchFieldEnd)&&(this.querytemp.length>0&&(this.querytemp+=" AND "),this.querytemp+="year:["+this.searchFieldStart+" TO *]"),void 0!=this.searchFieldEnd&&this.searchFieldEnd>0&&(void 0==this.searchFieldStart||""==this.searchFieldStart||0==this.searchFieldStart)&&(this.querytemp.length>0&&(this.querytemp+=" AND "),this.querytemp+="year:[* TO "+this.searchFieldEnd+"]"),void 0!=this.searchFieldStart&&this.searchFieldStart>0&&void 0!=this.searchFieldEnd&&this.searchFieldEnd>0&&(this.querytemp.length>0&&(this.querytemp+=" AND "),this.querytemp+="year:["+this.searchFieldStart+" TO "+this.searchFieldEnd+"]"),this.advance=!1,this.search()},logout:function(){var t=this;this.$confirm({title:"Are you sure you want to log out?",content:"",iconType:"warning",okText:"Yes",cancelText:"No",onOk:function(){t.userSignOut()},onCancel:function(){}})},userSignOut:function(){var t=this.$localStorage.get("token"),e=this;this.$localStorage.remove("token"),this.axios.request({url:"/revoke/"+t,method:"GET",headers:{"content-type":"application/json"}}).then((function(t){e.$router.push("/portal/")})).catch((function(t){console.log(t),e.$router.push("/portal/")}))},goBrowsePage:function(){this.$router.push("/browse/").catch((function(t){})),this.reset()},goSearchPage:function(){this.$router.push("/search/").catch((function(t){}))},loadMoreSubject:function(){for(var t=this.subjectFilter.length,e=t+this.subFiltersize,a=0;a<this.Data.subject.length;a++)if(a>=this.subjectFilter.length){if(!(this.subjectFilter.length<e))break;this.subjectFilter.push(this.Data.subject[a])}},loadMorePublisher:function(){for(var t=this.publisherFilter.length,e=t+this.subFiltersize,a=0;a<this.Data.publisher.length;a++)if(a>=this.publisherFilter.length){if(!(this.publisherFilter.length<e))break;this.publisherFilter.push(this.Data.publisher[a])}},loadMoreContributor:function(){for(var t=this.contributorFilter.length,e=t+this.subFiltersize,a=0;a<this.Data.contributor.length;a++)if(a>=this.contributorFilter.length){if(!(this.contributorFilter.length<e))break;this.contributorFilter.push(this.Data.contributor[a])}},loadMoreLanguage:function(){for(var t=this.languageFilter.length,e=t+this.subFiltersize,a=0;a<this.Data.language.length;a++)if(a>=this.languageFilter.length){if(!(this.languageFilter.length<e))break;this.languageFilter.push(this.Data.language[a])}},loadMoreCollection:function(){for(var t=this.collectionFilter.length,e=t+this.subFiltersize,a=0;a<this.Data.collection.length;a++)if(a>=this.collectionFilter.length){if(!(this.collectionFilter.length<e))break;var i=this.Data.collection[a];i.docs=[],this.collectionFilter.push(i)}this.updateCollectionShowcase()},resetSelection:function(){this.collection="*",this.initialSearch()},resetSubSelection:function(){this.filterSearch=!1,this.filterStr="",this.filterSubCategory()},applyFilter:function(t,e){"collection"==t&&(this.collection=e,this.initialSearch())},searchSubCategory:function(t,e){if(e=encodeURI(e),"contributor"==t){var a=this.$router.resolve({name:"searchcustom",params:{year:"*",language:"*",collection:this.collection,publisher:"*",subject:"*",contributor:e,start:"1",rows:"10",query:"*"}}),i=a.href;window.open(i,"_blank")}else if("subject"==t){var r=this.$router.resolve({name:"searchcustom",params:{year:"*",language:"*",collection:this.collection,publisher:"*",subject:e,contributor:"*",start:"1",rows:"10",query:"*"}}),s=r.href;window.open(s,"_blank")}else if("publisher"==t){var o=this.$router.resolve({name:"searchcustom",params:{year:"*",language:"*",collection:this.collection,publisher:e,subject:"*",contributor:"*",start:"1",rows:"10",query:"*"}}),n=o.href;window.open(n,"_blank")}else if("language"==t){var l=this.$router.resolve({name:"searchcustom",params:{year:"*",language:e,collection:this.collection,publisher:"*",subject:"*",contributor:"*",start:"1",rows:"10",query:"*"}}),c=l.href;window.open(c,"_blank")}},searchCollection:function(t){var e=this.$router.resolve({name:"searchcustom",params:{year:"*",language:"*",collection:t,publisher:"*",subject:"*",contributor:"*",start:"1",rows:"10",query:"*"}}),a=e.href;window.open(a,"_blank")},browseSearch:function(){var t=this.querytempCollection;t=t.trim(),t.length>0&&(this.submitsearching=!0,this.query=this.querytempCollection,this.dataSource=[],this.startYear="",this.endYear="",this.initialSearch())},search:function(){if(""!=this.querytemp.trim()){var t=this.querytemp,e=this.$router.resolve({name:"searchcustom",params:{year:"*",language:"*",collection:"*",publisher:"*",subject:"*",contributor:"*",start:"1",rows:"10",query:t}}),a=e.href;window.open(a,"_self")}},detail:function(t){var e=this.$router.resolve({name:"detail",params:{id:t}}),a=e.href;window.open(a,"_blank")},catalog:function(t){var e=this.$router.resolve({name:"catalog",params:{id:t}}),a=e.href;window.open(a,"_blank")},reset:function(){this.filterStr="",this.submitsearching=!1,this.querytemp="",this.querytempCollection="",this.startYear="",this.endYear="",this.start=1,this.sort="",this.query="*",this.querytemp="",this.previousconfirmquery="",this.format="*",this.publisher="*",this.year="*",this.language="*",this.subject="*",this.contributor="*",this.collection="*",this.initialSearch()},changeOrder:function(t){this.start=1,this.sort=t,this.initialSearch()},encode:function(t){if("*"==t)return t;var e=f.encode(t);return e=encodeURI(e),e=e.replace(/=/g,"@"),e=e.replace(/\+/g,"@"),e},updateURL:function(){history.pushState({},null,"/#/browse/"+this.collection)},initialSearch:function(){this.searching=!0;var t=this;window.scrollTo(0,0),""==this.query&&(this.query="*");var e=this.portal+"/data/browse/"+this.year+"/"+this.encode(this.language)+"/"+this.encode(this.collection)+"/"+this.encode(this.publisher)+"/"+this.encode(this.subject)+"/"+this.encode(this.contributor)+"/"+encodeURI(this.query)+"?facet="+this.filtersize,a="";void 0!=this.organization.index&&(a=this.organization.index),this.$axios.get(e,{headers:{Authorization:"Bearer "+t.$localStorage.get("token"),index:a}}).then((function(e){if(t.Data=e.data,void 0!=t.Data.response&&void 0!=t.Data.response.numFound&&t.Data.response.numFound>0){try{if(void 0!=t.Data.language){for(var a=[],i="",r=0;r<t.Data.language.length;r++)if(r%2==0)i=t.Data.language[r];else{var s={};s.title=i,s.count=t.Data.language[r],-1!=t.language.indexOf(i)?s.check=!0:s.check=!1,a.push(s)}t.Data.language=a,t.Data.language.sort((function(t,e){return t.count<e.count?1:-1}))}}catch(u){console.log(u)}try{if(void 0!=t.Data.collection){for(a=[],i="",r=0;r<t.Data.collection.length;r++)if(r%2==0)i=t.Data.collection[r];else{s={};s.title=i,s.count=t.Data.collection[r],-1!=t.collection.indexOf(i)?s.check=!0:s.check=!1,a.push(s)}t.Data.collection=a,t.Data.collection.sort((function(t,e){return t.count<e.count?1:-1}))}}catch(u){}try{if(void 0!=t.Data.publisher){for(a=[],i="",r=0;r<t.Data.publisher.length;r++)if(r%2==0)i=t.Data.publisher[r];else{s={};s.title=i,s.count=t.Data.publisher[r],-1!=t.publisher.indexOf(i)?s.check=!0:s.check=!1,a.push(s)}t.Data.publisher=a,t.Data.publisher.sort((function(t,e){return t.count<e.count?1:-1}))}}catch(u){}try{if(void 0!=t.Data.contributor){for(a=[],i="",r=0;r<t.Data.contributor.length;r++)if(r%2==0)i=t.Data.contributor[r];else{s={};s.title=i,s.count=t.Data.contributor[r],-1!=t.contributor.indexOf(i)?s.check=!0:s.check=!1,a.push(s)}t.Data.contributor=a,t.Data.contributor.sort((function(t,e){return t.count<e.count?1:-1}))}}catch(u){}try{if(void 0!=t.Data.subject){a=[],i="";for(var o=0;o<t.Data.subject.length;o++)if(o%2==0)i=t.Data.subject[o];else{s={};s.title=i,s.count=t.Data.subject[o],-1!=t.subject.indexOf(i)?s.check=!0:s.check=!1,a.push(s)}t.Data.subject=a,t.Data.subject.sort((function(t,e){return t.count<e.count?1:-1}))}}catch(u){}if(t.formatFilter=[],t.yearFilter=[],t.languageFilter=[],t.collectionFilter=[],t.publisherFilter=[],t.contributorFilter=[],t.subjectFilter=[],"*"==t.collection)try{for(r=0;r<t.Data.collection.length;r++){if(!(t.collectionFilter.length<t.subFiltersize))break;var n=t.Data.collection[r];n.docs=[],t.collectionFilter.push(n)}t.updateCollectionShowcase()}catch(h){console.log(h)}else{try{for(r=0;r<t.Data.language.length;r++){if(!(t.languageFilter.length<t.subFiltersize))break;t.languageFilter.push(t.Data.language[r])}}catch(h){console.log(h)}try{for(r=0;r<t.Data.publisher.length;r++){if(!(t.publisherFilter.length<t.subFiltersize))break;t.publisherFilter.push(t.Data.publisher[r])}}catch(h){console.log(h)}try{for(var l=0;l<t.Data.contributor.length;l++){if(!(t.contributorFilter.length<t.subFiltersize))break;t.contributorFilter.push(t.Data.contributor[l])}}catch(h){console.log(h)}try{for(var c=0;c<t.Data.subject.length;c++){if(!(t.subjectFilter.length<t.subFiltersize))break;t.subjectFilter.push(t.Data.subject[c])}}catch(h){console.log(h)}}try{t.maxyear=t.Data.yearstat.max,t.minyear=t.Data.yearstat.min}catch(h){}t.updateURL()}else t.collectionFilter=[];setTimeout(t.resetSearchStatus,500)})).catch((function(e){t.collectionFilter=[],setTimeout(t.resetSearchStatus,500)}))},resetSearchStatus:function(){this.searching=!1},filterSubCategory:function(){var t=this.filterStr;if(t=t.trim(),t=t.toLowerCase(),t.length>=1){var e=100;this.filterSearch=!0;try{for(var a=[],i=0;i<this.Data.publisher.length;i++){var r=this.Data.publisher[i].title;r=r.toLowerCase(),-1!=r.indexOf(t)&&a.length<e&&a.push(this.Data.publisher[i])}this.publisherFilter=a}catch(s){}try{for(a=[],i=0;i<this.Data.subject.length;i++){r=this.Data.subject[i].title;r=r.toLowerCase(),-1!=r.indexOf(t)&&a.length<e&&a.push(this.Data.subject[i])}this.subjectFilter=a}catch(s){}try{for(a=[],i=0;i<this.Data.contributor.length;i++){r=this.Data.contributor[i].title;r=r.toLowerCase(),-1!=r.indexOf(t)&&a.length<e&&a.push(this.Data.contributor[i])}this.contributorFilter=a}catch(s){}try{for(a=[],i=0;i<this.Data.language.length;i++){r=this.Data.language[i].title;r=r.toLowerCase(),-1!=r.indexOf(t)&&a.length<e&&a.push(this.Data.language[i])}this.languageFilter=a}catch(s){}}else{this.contributorFilter=[],this.publisherFilter=[],this.subjectFilter=[],this.languageFilter=[];for(i=0;i<this.Data.contributor.length;i++)this.contributorFilter.length<this.subFiltersize&&this.contributorFilter.push(this.Data.contributor[i]);for(i=0;i<this.Data.publisher.length;i++)this.publisherFilter.length<this.subFiltersize&&this.publisherFilter.push(this.Data.publisher[i]);for(i=0;i<this.Data.subject.length;i++)this.subjectFilter.length<this.subFiltersize&&this.subjectFilter.push(this.Data.subject[i]);for(i=0;i<this.Data.subject.length;i++)this.languageFilter.length<this.languageFilter&&this.languageFilter.push(this.Data.language[i])}},verifyCreated:function(){var t=this;if(document.title="World Library: Main Search Page",null==this.$localStorage.get("token")||void 0==this.$localStorage.get("token")||""==this.$localStorage.get("token")){if(void 0!=this.$route.query){var e=this.$route.query.AffiliateKey;void 0==e&&(e=this.$route.query.affiliatekey,void 0==e&&(e=this.$route.query.AFFILIATEKEY))}void 0!=e?this.axios.request({url:"/verify/key?AffiliateKey="+e,method:"GET",headers:{"content-type":"application/json"}}).then((function(e){void 0!=e.data.access_token?(t.$localStorage.set("token",e.data.access_token),void 0!=t.$route.params.collection&&t.$route.params.collection.length>0?(t.collection=t.$route.params.collection,t.applyFilter("collection",t.collection)):t.initialSearch()):(alert("You don't have permission to access this service"),t.userSignOut())})).catch((function(t){})):this.axios.request({url:"/verify",method:"GET",headers:{"content-type":"application/json"}}).then((function(e){void 0!=e.data.access_token?(t.$localStorage.set("token",e.data.access_token),void 0!=t.$route.params.collection&&t.$route.params.collection.length>0?(t.collection=t.$route.params.collection,t.applyFilter("collection",t.collection)):t.initialSearch()):(alert("You don't have permission to access this service"),t.userSignOut())})).catch((function(t){}))}else void 0!=this.$route.params.collection&&this.$route.params.collection.length>0?(this.collection=this.$route.params.collection,this.applyFilter("collection",this.collection)):this.initialSearch()},updateImageUrl:function(t){return this.imageroot+t},showDrawer:function(){this.visible=!this.visible}},mounted:function(){},filters:{commas:function(t){try{var e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}catch(a){return t}}},created:function(){var t=this;null!=this.$localStorage.get("token")&&void 0!=this.$localStorage.get("token")&&""!=this.$localStorage.get("token")?this.$axios.get("/info/",{headers:{Authorization:"Bearer "+t.$localStorage.get("token")}}).then((function(e){t.organization=e.data,t.verifyCreated()})).catch((function(e){t.$localStorage.remove("token"),t.verifyCreated()})):this.verifyCreated()},computed:{normalPublisher:function(){try{return this.publisher.replace(/_/g,",")}catch(t){}return this.publisher},DataList:function(){var t=[];try{t=this.Data.response.docs}catch(e){t=[]}return t},total:function(){var t=0;try{t=this.Data.response.numFound}catch(e){}return t}}},F=C,j=(a("d577"),Object(c["a"])(F,p,g,!1,null,"343a69a0",null)),D=j.exports,$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-layout",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}}},[i("a-layout-header",{staticClass:"top-header"},[i("a-row",{staticClass:"top-header",attrs:{type:"flex",align:"middle",justify:"space-between"}},[i("a-col",{attrs:{span:6,sm:6,xs:4}},[i("img",{staticClass:"header-image",attrs:{src:a("c6d2")},on:{click:function(e){return t.goBrowsePage()}}})]),i("a-col",{attrs:{span:18,sm:18,xs:0}},[i("a-row",{attrs:{type:"flex",justify:"end"}},[i("span",{staticClass:"control-icon ",on:{click:function(e){return t.goBrowsePage()}}},[i("a-icon",{attrs:{type:"unordered-list"}}),t._v("\n            Browse\n          ")],1),i("span",{staticClass:"control-icon control-current",on:{click:function(e){return t.goSearchPage()}}},[i("a-icon",{attrs:{type:"search"}}),t._v("\n            Search\n          ")],1),i("span",{staticClass:"control-icon",on:{click:function(e){return t.handleOrganizationInfo()}}},[i("a-icon",{attrs:{type:"bank",title:"Institution Information"}}),t._v("\n            Institution\n          ")],1),i("span",{staticClass:"control-icon",on:{click:function(e){return t.logout()}}},[i("a-icon",{attrs:{type:"logout"}}),t._v("\n            Log out\n          ")],1)])],1),i("a-col",{attrs:{xs:20,sm:0}},[i("a-row",{attrs:{type:"flex",justify:"end"}},[i("a-button",{staticClass:"menu-icon",on:{click:t.showDrawer}},[i("a-icon",{attrs:{type:"menu"}})],1)],1)],1),i("a-drawer",{staticStyle:{"font-size":"22px"},attrs:{title:"WorldLibrary",placement:t.placement,closable:!1,visible:t.visible},on:{close:t.showDrawer}},[i("p",{staticClass:"control-icon ",on:{click:function(e){return t.goBrowsePage()}}},[i("a-icon",{attrs:{type:"unordered-list"}}),t._v("\n          Browse\n        ")],1),i("p",{staticClass:"control-icon control-current",on:{click:function(e){return t.goSearchPage()}}},[i("a-icon",{attrs:{type:"search"}}),t._v("\n          Search\n        ")],1),i("p",{staticClass:"control-icon",on:{click:function(e){return t.handleOrganizationInfo()}}},[i("a-icon",{attrs:{type:"bank",title:"Institution Information"}}),t._v("\n          Institution\n        ")],1),i("p",{staticClass:"control-icon",on:{click:function(e){return t.logout()}}},[i("a-icon",{attrs:{type:"logout"}}),t._v("\n          Log out\n        ")],1)])],1)],1),i("a-layout",[i("a-layout-header",{staticClass:"search-header"},["*"==t.collection?i("a-row",[i("a-col",{staticStyle:{"text-align":"right","padding-right":"10px"},attrs:{xs:2,sm:6,md:6}}),i("a-col",{attrs:{xs:14,sm:12,md:12}},[i("a-auto-complete",{staticStyle:{width:"100%"},attrs:{placeholder:"Search Books ..."},model:{value:t.querytemp,callback:function(e){t.querytemp=e},expression:"querytemp"}})],1),i("a-col",{attrs:{xs:8,sm:6,md:6}},[i("a-button",{staticStyle:{"margin-left":"12px"},attrs:{type:"dashed",shape:"circle",icon:"search",title:"Search by keyword",size:t.size},on:{click:t.search}}),i("a-button",{staticStyle:{"margin-left":"12px"},attrs:{type:"dashed",shape:"circle",icon:"setting",title:"Advanced Search",size:t.size},on:{click:t.switchAdvance}})],1),i("a-modal",{attrs:{title:"Advanced Search"},model:{value:t.advance,callback:function(e){t.advance=e},expression:"advance"}},[i("template",{slot:"footer"},[i("a-button",{key:"reset",on:{click:t.resetAdvanceSearch}},[t._v("Reset")]),i("a-button",{key:"submit",attrs:{type:"primary"},on:{click:t.executeAdvanceSearch}},[t._v("\n              Search\n            ")])],1),t._l(t.searchFieldNum,(function(e,a){return i("div",[i("a-row",{staticStyle:{"margin-top":"5px"}},[i("span",{staticStyle:{width:"100px"}},[i("a-select",{staticStyle:{width:"100px"},attrs:{defaultValue:t.searchFieldValue[0]},on:{change:function(e){return t.updateSearchField(e,a)}},model:{value:t.searchFieldField[a],callback:function(e){t.$set(t.searchFieldField,a,e)},expression:"searchFieldField[findex]"}},t._l(t.searchFieldValue,(function(e,a){return i("a-select-option",{key:e},[t._v(t._s(t.searchFieldName[a]))])})),1)],1),i("span",{staticStyle:{width:"calc(100% - 180px)"}},[i("a-auto-complete",{ref:a+"_keyword",refInFor:!0,staticStyle:{width:"calc(100% - 180px)"},attrs:{placeholder:"Enter Keyword ..."},model:{value:t.searchFieldContent[a],callback:function(e){t.$set(t.searchFieldContent,a,e)},expression:"searchFieldContent[findex]"}})],1),i("span",{staticStyle:{width:"80px"}},[a<t.searchFieldNum-1?i("a-select",{staticStyle:{width:"80px"},attrs:{defaultValue:t.searchBool[0]},on:{change:function(e){return t.updateSearchBool(e,a)}},model:{value:t.searchFieldBool[a],callback:function(e){t.$set(t.searchFieldBool,a,e)},expression:"searchFieldBool[findex]"}},t._l(t.searchBool,(function(e,a){return i("a-select-option",{key:e},[t._v(t._s(e))])})),1):t._e()],1)])],1)})),i("div",{staticStyle:{"text-align":"right"}},[i("a-button",{staticStyle:{"margin-top":"10px","margin-right":"15px"},attrs:{type:"dashed",shape:"circle",icon:"plus",title:"Add Search Row",size:t.size},on:{click:t.addSearchRow}})],1),i("a-divider"),i("div",[i("a-row",[t._v("\n              Publication Year :\n              "),i("br"),i("a-input-number",{attrs:{placeholder:"Start Year",step:"10"},model:{value:t.searchFieldStart,callback:function(e){t.searchFieldStart=e},expression:"searchFieldStart"}}),t._v("\n               - \n              "),i("a-input-number",{attrs:{placeholder:"End Year",step:"10"},model:{value:t.searchFieldEnd,callback:function(e){t.searchFieldEnd=e},expression:"searchFieldEnd"}})],1)],1)],2)],1):t._e(),"*"!=t.collection?i("a-row",[i("a-col",{staticClass:"header-title",attrs:{span:18}},[i("span",{staticClass:"header-back",on:{click:function(e){return t.reset()}}},[i("a-icon",{staticStyle:{"margin-right":"10px"},attrs:{type:"left"}}),t._v(t._s(this.collection)+"\n          ")],1),1==t.filterSearch?i("span",{staticStyle:{"margin-left":"25px"}},[i("a",{on:{click:t.resetSubSelection}},[i("a-icon",{attrs:{type:"reload"}}),t._v(" Reset Search")],1)]):t._e()]),i("a-col",{attrs:{span:6}},[i("a-input-search",{attrs:{placeholder:"Filter by keyword ...",size:"small"},on:{search:t.filterSubCategory},model:{value:t.filterStr,callback:function(e){t.filterStr=e},expression:"filterStr"}})],1)],1):t._e()],1),i("a-layout",[i("a-layout-sider",{staticClass:"main-sider",attrs:{width:t.mainSiderWidth}},[i("div",[i("a-row",{attrs:{type:"flex",justify:"end"}},[i("a-col",[t.showSider?i("a-icon",{staticClass:"menu-fold-icon",style:{fontSize:"26px",color:"#1890ff",cursor:"pointer",marginLeft:"8px",marginRight:"4px",position:"fixed",top:"177px",left:"262px",zIndex:"10"},attrs:{type:"menu-fold"},on:{click:function(e){return t.menuSider()}}}):i("a-icon",{staticClass:"menu-unfold-icon",style:{fontSize:"26px",color:"#1890ff",cursor:"pointer",marginLeft:"8px",marginRight:"4px",position:"fixed",top:"177px",left:"0px"},attrs:{type:"menu-unfold"},on:{click:function(e){return t.menuSider()}}})],1)],1)],1),i("a-card",{directives:[{name:"show",rawName:"v-show",value:t.showSider,expression:"showSider"}],staticStyle:{"text-align":"left"},attrs:{bordered:!1}},[i("div",{staticStyle:{"margin-bottom":"25px"}},[i("li",{staticClass:"categorystyle",staticStyle:{margin:"0px"}},[i("a-col",{staticStyle:{"text-align":"left","margin-bottom":"15px"},attrs:{span:16}},[t._v("Publication Year")]),i("a-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[void 0!=t.year&&t.year.length>1&&(t.startYear>0||t.endYear>0)?i("a-button",{attrs:{type:"link",title:"Remove the setting",size:t.size},on:{click:t.handleYearClean}},[t._v("Clean")]):t._e()],1)],1),i("a-divider",{staticClass:"linestyle"}),i("a-row",{attrs:{span:24}},[i("a-input-number",{staticClass:"inputYear",attrs:{placeholder:"Start",step:"10"},on:{change:t.onStartYearChange},model:{value:t.startYear,callback:function(e){t.startYear=e},expression:"startYear"}}),t._v("\n               - \n              "),i("a-input-number",{staticClass:"inputYear",attrs:{placeholder:"End",step:"10"},on:{change:t.onEndYearChange},model:{value:t.endYear,callback:function(e){t.endYear=e},expression:"endYear"}}),t._v("\n               \n              "),t.startYear>0||t.endYear>0?i("a-button",{attrs:{type:"primary",shape:"circle",icon:"filter",title:"Filter results by year",size:t.size},on:{click:t.handleYearSearch}}):t._e()],1)],1),void 0!=t.languageFilter&&t.languageFilter.length>0?i("div",[i("li",{staticClass:"categorystyle"},[i("a-col",{staticStyle:{"text-align":"left"},attrs:{span:16}},[t._v("Language ")]),i("a-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},["*"!=t.language?i("a-button",{attrs:{type:"link",title:"Remove the setting",size:t.size},on:{click:t.handleLanguageClean}},[t._v("Clean")]):t._e()],1)],1),i("a-divider",{staticClass:"linestyle"}),t._l(t.languageFilter,(function(e,a){return i("li",{staticClass:"filterItem",attrs:{title:e.title},on:{click:function(a){return t.applyFilter("language",e.title)}}},[e.title==t.language?i("span",{staticClass:"filterItemHighlight"},[t._v(t._s(e.title)+" ("+t._s(t._f("commas")(e.count))+")")]):t._e(),e.title!=t.language?i("span",[t._v(t._s(e.title)+" ("+t._s(t._f("commas")(e.count))+")")]):t._e()])})),t.Data.language.length>t.languageFilter.length?i("li",[i("div",{staticClass:"filterMore",on:{click:t.loadMoreLanguage}},[t._v("More")])]):t._e()],2):t._e(),void 0!=t.contributorFilter&&t.contributorFilter.length>0?i("div",[i("li",{staticClass:"categorystyle"},[i("a-col",{staticStyle:{"text-align":"left"},attrs:{span:16}},[t._v("Contributor")]),i("a-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},["*"!=t.contributor?i("a-button",{attrs:{type:"link",title:"Remove the setting",size:t.size},on:{click:t.handleContributorClean}},[t._v("Clean")]):t._e()],1)],1),i("a-divider",{staticClass:"linestyle"}),t._l(t.contributorFilter,(function(e,a){return i("li",{staticClass:"filterItem",attrs:{title:e.title},on:{click:function(a){return t.applyFilter("contributor",e.title)}}},[e.title==t.contributor?i("span",{staticClass:"filterItemHighlight"},[t._v(t._s(e.title)+" ("+t._s(t._f("commas")(e.count))+")\n              ")]):t._e(),e.title!=t.contributor?i("span",[t._v(t._s(e.title)+" ("+t._s(t._f("commas")(e.count))+")")]):t._e()])})),t.Data.contributor.length>t.contributorFilter.length?i("li",[i("div",{staticClass:"filterMore",on:{click:t.loadMoreContributor}},[t._v("More")])]):t._e()],2):t._e(),void 0!=t.publisherFilter&&t.publisherFilter.length>0?i("div",[i("li",{staticClass:"categorystyle"},[i("a-col",{staticStyle:{"text-align":"left"},attrs:{span:16}},[t._v("Publisher")]),i("a-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},["*"!=t.publisher?i("a-button",{attrs:{type:"link",title:"Remove the setting",size:t.size},on:{click:t.handlePublisherClean}},[t._v("Clean")]):t._e()],1)],1),i("a-divider",{staticClass:"linestyle"}),t._l(t.publisherFilter,(function(e,a){return i("li",{staticClass:"filterItem",attrs:{title:e.title},on:{click:function(a){return t.applyFilter("publisher",e.title)}}},[e.title==t.normalPublisher?i("span",{staticClass:"filterItemHighlight"},[t._v(t._s(e.title)+" ("+t._s(t._f("commas")(e.count))+")\n              ")]):t._e(),e.title!=t.normalPublisher?i("span",[t._v(t._s(e.title)+" ("+t._s(t._f("commas")(e.count))+")")]):t._e()])})),t.Data.publisher.length>t.publisherFilter.length?i("li",[i("div",{staticClass:"filterMore",on:{click:t.loadMorePublisher}},[t._v("More")])]):t._e()],2):t._e(),void 0!=t.collectionFilter&&t.collectionFilter.length>0?i("div",[i("li",{staticClass:"categorystyle"},[i("a-col",{staticStyle:{"text-align":"left"},attrs:{span:16}},[t._v("Collection")]),i("a-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},["*"!=t.collection?i("a-button",{attrs:{type:"link",title:"Remove the setting",size:t.size},on:{click:t.handleCollectionClean}},[t._v("Clean")]):t._e()],1)],1),i("a-divider",{staticClass:"linestyle"}),t._l(t.collectionFilter,(function(e,a){return i("li",{staticClass:"filterItem",attrs:{title:e.title},on:{click:function(a){return t.applyFilter("collection",e.title)}}},[e.title==t.collection?i("span",{staticClass:"filterItemHighlight"},[t._v(t._s(e.title)+" ("+t._s(t._f("commas")(e.count))+")")]):t._e(),e.title!=t.collection?i("span",[t._v(t._s(e.title)+" ("+t._s(t._f("commas")(e.count))+")")]):t._e()])})),t.Data.collection.length>t.collectionFilter.length?i("li",[i("div",{staticClass:"filterMore",on:{click:t.loadMoreCollection}},[t._v("More")])]):t._e()],2):t._e(),void 0!=t.subjectFilter&&t.subjectFilter.length>0?i("div",[i("li",{staticClass:"categorystyle"},[i("a-col",{staticStyle:{"text-align":"left"},attrs:{span:16}},[t._v("Subject")]),i("a-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},["*"!=t.subject?i("a-button",{attrs:{type:"link",title:"Remove the setting",size:t.size},on:{click:t.handleSubjectClean}},[t._v("Clean")]):t._e()],1)],1),i("a-divider",{staticClass:"linestyle"}),t._l(t.subjectFilter,(function(e,a){return i("li",{staticClass:"filterItem",attrs:{title:e.title},on:{click:function(a){return t.applyFilter("subject",e.title)}}},[e.title==t.subject?i("span",{staticClass:"filterItemHighlight"},[t._v(t._s(e.title)+" ("+t._s(t._f("commas")(e.count))+")")]):t._e(),e.title!=t.subject?i("span",[t._v(t._s(e.title)+" ("+t._s(t._f("commas")(e.count))+")")]):t._e()])})),t.Data.subject.length>t.subjectFilter.length?i("li",[i("div",{staticClass:"filterMore",on:{click:t.loadMoreSubject}},[t._v("More")])]):t._e()],2):t._e()]),i("div",{staticClass:"space"})],1),i("a-layout-content",{staticClass:"main-content"},[i("a-row",[t.searching?i("a-col",{ref:"searchheader",staticStyle:{"text-align":"left","font-weight":"bold"},attrs:{sm:12,xs:24}},[i("a-spin",{attrs:{size:"large"}}),i("span",{staticStyle:{color:"#85C1E9","margin-left":"15px"}},[t._v("Searching for the results, please wait ...\n            ")])],1):i("a-col",{staticStyle:{"text-align":"left","font-weight":"bold"},attrs:{sm:12,xs:0}},[t.total>0&&t.end<t.total?i("span",[t._v("\n              Display "+t._s(t.start)+" - "+t._s(t.end)+" of\n              "+t._s(t._f("commas")(t.total))+" record(s)")]):t._e(),t.total>0&&t.end>=t.total?i("span",[t._v("\n              Display "+t._s(t.start)+" - "+t._s(t.total)+" of\n              "+t._s(t._f("commas")(t.total))+" record(s)")]):t._e(),0==t.total?i("span",[t._v("\n              You search - "+t._s(t.query)+" - did not match any records.")]):t._e(),i("span",{directives:[{name:"show",rawName:"v-show",value:"*"!=t.year||"*"!=t.language||"*"!=t.contributor||"*"!=t.subject||"*"!=t.publisher||"*"!=t.format||"*"!=t.publisher||"*"!=t.collection||"*"!=t.query,expression:"\n                year != '*' ||\n                  language != '*' ||\n                  contributor != '*' ||\n                  subject != '*' ||\n                  publisher != '*' ||\n                  format != '*' ||\n                  publisher != '*' ||\n                  collection != '*' ||\n                  query != '*'\n              "}],staticStyle:{"margin-left":"25px"}},[i("a",{on:{click:function(e){return t.reset()}}},[i("a-icon",{attrs:{type:"reload"}}),t._v(" Reset Search")],1)])]),t.total>0?i("a-col",{attrs:{sm:12,xs:24,align:"end"}},[i("a-select",{staticStyle:{"font-size":"8pt",width:"100%"},on:{change:t.changeOrder},model:{value:t.sort,callback:function(e){t.sort=e},expression:"sort"}},[""!=t.querytemp?i("a-select-option",{attrs:{value:"relevancy"}},[t._v("Sort by Relevancy")]):t._e(),i("a-select-option",{attrs:{value:"yeardesc"}},[t._v("Sort by Publication (newset to oldest)")]),i("a-select-option",{attrs:{value:"yearasc"}},[t._v("Sort by Publication (oldest to newest)")]),i("a-select-option",{attrs:{value:"titleasc"}},[t._v("Sort by Title (A to Z)")]),i("a-select-option",{attrs:{value:"titledesc"}},[t._v("Sort by Title (Z to A)")])],1)],1):t._e(),t.searching?i("a-col",{ref:"searchheader",staticStyle:{"text-align":"left","font-weight":"bold"},attrs:{sm:0,xs:24}},[i("a-spin",{attrs:{size:"large"}}),i("span",{staticStyle:{color:"#85C1E9","margin-left":"15px"}},[t._v("Searching for the results, please wait ...\n            ")])],1):i("a-col",{staticStyle:{"text-align":"left","font-weight":"bold"},attrs:{sm:0,xs:24}},[t.total>0&&t.end<t.total?i("span",[t._v("\n              Display "+t._s(t.start)+" - "+t._s(t.end)+" of\n              "+t._s(t._f("commas")(t.total))+" record(s)")]):t._e(),t.total>0&&t.end>=t.total?i("span",[t._v("\n              Display "+t._s(t.start)+" - "+t._s(t.total)+" of\n              "+t._s(t._f("commas")(t.total))+" record(s)")]):t._e(),0==t.total?i("span",[t._v("\n              You search - "+t._s(t.query)+" - did not match any records.")]):t._e(),i("span",{directives:[{name:"show",rawName:"v-show",value:"*"!=t.year||"*"!=t.language||"*"!=t.contributor||"*"!=t.subject||"*"!=t.publisher||"*"!=t.format||"*"!=t.publisher||"*"!=t.collection||"*"!=t.query,expression:"\n                year != '*' ||\n                  language != '*' ||\n                  contributor != '*' ||\n                  subject != '*' ||\n                  publisher != '*' ||\n                  format != '*' ||\n                  publisher != '*' ||\n                  collection != '*' ||\n                  query != '*'\n              "}],staticStyle:{"margin-left":"25px"}},[i("a",{on:{click:function(e){return t.reset()}}},[i("a-icon",{attrs:{type:"reload"}}),t._v(" Reset Search")],1)])])],1),i("a-divider",{staticClass:"linestyle"}),0==t.total&&void 0!=t.query&&(t.query.length>1||t.year.length>1)?i("a-row",[i("a-col",[i("a-col",{staticStyle:{"font-weight":"bold","margin-bottom":"25px"}},[t._v("Suggestions:")]),i("a-col",[i("ul",[i("li",[t._v("Make sure all words are spelled correctly.")]),i("li",[t._v("Try different keywords.")]),i("li",[t._v("Try more general keywords.")]),i("li",[t._v("Try fewer keywords.")]),i("li",[t._v("Try other year period.")])])])],1)],1):t._e(),0==t.total&&void 0!=t.query&&t.query.length<=1&&t.year.length<=1?i("a-row",[i("a-col",[i("a-col",{staticStyle:{"font-weight":"bold","margin-bottom":"25px"}},[t._v("Loading ...")])],1)],1):t._e(),i("a-row",[t.total>0?i("a-list",{staticStyle:{"text-align":"left"},attrs:{itemLayout:"vertical",size:"large",dataSource:t.DataList},scopedSlots:t._u([{key:"renderItem",fn:function(e,a){return i("a-list-item",{key:"item.title",staticClass:"record-item-style"},[t.searching?i("a-row",{staticClass:"record-skeleton"},[[i("a-skeleton")]],2):i("a-row",{staticClass:"record"},[i("a-col",{staticClass:"record-image-section",attrs:{xs:12,sm:10,md:8,lg:6}},[i("img",{ref:e.id+"_cover",staticClass:"record-image",attrs:{src:t.updateImageUrl(e.image)},on:{click:function(a){return t.linkDetail(e.master,e.id)}}})]),i("a-col",{attrs:{xs:12,sm:14,md:16,lg:18,align:"start"}},[i("a-row",{staticClass:"record-title",attrs:{title:e.title}},[i("a-col",{domProps:{innerHTML:t._s(t.hltitle(e.id,e.title))},on:{click:function(a){return t.linkDetail(e.master,e.id)}}})],1),i("a-row",{staticClass:"record-extra"},[e.year>0?i("span",[t._v(t._s(e.year)+"; ")]):t._e(),t._l(e.language,(function(e,a){return i("span",{staticClass:"record-section-item",on:{click:function(a){return t.applyResultFilter("language",e)}}},[i("span",{directives:[{name:"show",rawName:"v-show",value:a>0,expression:"lindex > 0"}]},[t._v(",")]),e==t.language?i("span",[i("strong",[t._v(t._s(e))])]):t._e(),e!=t.language?i("span",[t._v(t._s(e))]):t._e()])})),e.page>0&&0==e.master?i("span",[t._v("; "+t._s(e.page)+" Pages")]):t._e(),void 0!=e.contributor&&e.contributor.length>0?i("span",[i("span",[t._v("; ")]),t._l(e.contributor,(function(e,a){return i("span",{staticClass:"record-section-item",on:{click:function(a){return t.applyResultFilter("contributor",e)}}},[e==t.contributor?i("span",[i("strong",[t._v(t._s(e))])]):t._e(),e!=t.contributor?i("span",[t._v(t._s(e))]):t._e()])}))],2):t._e(),void 0!=e.publisher&&e.publisher.length>0?i("span",[i("span",[t._v("; ")]),t._l(e.publisher,(function(e,a){return i("span",{staticClass:"record-section-item",on:{click:function(a){return t.applyResultFilter("publisher",e)}}},[e==t.publisher?i("span",[i("strong",[t._v(t._s(e))])]):t._e(),e!=t.publisher?i("span",[t._v(t._s(e))]):t._e()])}))],2):t._e()],2),void 0!=e.collection&&e.collection.length>0?i("a-row",t._l(e.collection,(function(e,a){return i("span",{staticClass:"record-section-item",on:{click:function(a){return t.applyResultFilter("collection",e)}}},[e==t.collection?i("span",[i("strong",[t._v(t._s(e))])]):t._e(),e!=t.collection?i("span",[t._v(t._s(e))]):t._e()])})),0):t._e(),void 0!=e.subject&&e.subject.length>0?i("a-row",t._l(e.subject,(function(e,a){return i("span",{staticClass:"record-section-item",on:{click:function(a){return t.applyResultFilter("subject",e)}}},[e==t.subject?i("span",[i("strong",[t._v(t._s(e))])]):t._e(),e!=t.subject?i("span",[t._v(t._s(e))]):t._e()])})),0):t._e(),1==e.master?i("a-row",{staticClass:"record-multi-edition"},[i("a-col",[t._v("This title has multiple editions")])],1):t._e(),i("a-col",{attrs:{xs:0,sm:24}},[0==e.master?i("a-row",{directives:[{name:"show",rawName:"v-show",value:void 0!=e.description,expression:"item.description != undefined"}],staticClass:"record-abstract",domProps:{innerHTML:t._s(t.hldescription(e.id,e.description))}}):t._e(),0==e.master?i("a-row",{staticClass:"record-action-section",attrs:{title:"Click to download the PDF"}},[i("span",{ref:e.id+"_display",staticClass:"record-action"},[i("a",{attrs:{title:"Click to download the PDF"},on:{click:function(a){return t.checkDownload(e.id)}}},[t._v("Download PDF\n                          "),e.size?i("span",[t._v("("+t._s(t._f("removeDot")(e.size))+")")]):t._e()])]),i("div",{ref:e.id+"_loading",staticClass:"record-action-loading"},[i("a-spin",{attrs:{tip:"Loading ..."}})],1)]):t._e()],1)],1),i("a-col",{attrs:{xs:24,sm:0}},[0==e.master?i("a-row",{directives:[{name:"show",rawName:"v-show",value:void 0!=e.description,expression:"item.description != undefined"}],staticClass:"record-abstract",domProps:{innerHTML:t._s(t.hldescription(e.id,e.description))}}):t._e(),0==e.master?i("a-row",{staticClass:"record-action-section",attrs:{title:"Click to download the PDF"}},[i("span",{ref:e.id+"_display",staticClass:"record-action"},[i("a",{attrs:{title:"Click to download the PDF"},on:{click:function(a){return t.checkDownload(e.id)}}},[t._v("Download PDF\n                        "),e.size?i("span",[t._v("("+t._s(t._f("removeDot")(e.size))+")")]):t._e()])]),i("div",{ref:e.id+"_loading",staticClass:"record-action-loading"},[i("a-spin",{attrs:{tip:"Loading ..."}})],1)]):t._e()],1)],1)],1)}}],null,!1,2910181281)}):t._e()],1),i("a-divider"),i("a-row",[i("a-col",{attrs:{span:24,align:"start"}},[t.DataList.length>0?i("a-pagination",{staticStyle:{"text-align":"left","margin-top":"35px"},attrs:{showSizeChanger:"",pageSizeOptions:t.sizes,defaultPageSize:t.rowsInteger,defaultCurrent:t.currentpage,current:t.currentpage,total:t.total},on:{change:t.switchpage,showSizeChange:t.switchsize}}):t._e()],1)],1)],1)],1),i("a-layout-footer",{staticClass:"main-footer"},[i("div",{attrs:{align:"center"}},[t._v("\n        Copyright © 2020 World Library. All rights reserved.\n      ")])]),i("go-top",[i("div",{staticClass:"top"},[t._v("Go Top")])])],1)],1)},q=[],z=(a("6762"),a("2fdb"),a("27ae").Base64),R=[],O=[],I=[],P=[],A=[],Y=[],T=[],L=[],N=(new Date).getFullYear(),E={data:function(){return{organization:{},currentYear:N,searching:!1,maxyear:0,minyear:0,sort:"yeardesc",format:"*",year:"*",language:"*",collection:"*",publisher:"*",subject:"*",contributor:"*",currentpage:1,start:1,rows:10,end:10,query:"*",querytemp:"",previousconfirmquery:"",Data:R,size:"small",formatFilter:O,yearFilter:I,languageFilter:P,collectionFilter:A,publisherFilter:Y,subjectFilter:T,contributorFilter:L,filtersize:7,sizes:["10","25","50","100"],startYear:"",endYear:"",suggestionTimer:"",dataSource:[],dataOpen:!1,collapsed:!0,advance:!1,searchFieldNum:3,searchFieldName:["Any","Title","Author","Publisher","Description"],searchFieldValue:["*","title","icontributor","ipublisher","description"],searchBool:["AND","OR","NOT"],searchFieldContent:["","",""],searchFieldField:["*","*","*"],searchFieldBool:["AND","AND","AND"],searchFieldStart:"",searchFieldEnd:"",mainSiderWidth:300,showSider:!0,screenWidth:document.body.clientWidth,visible:!1,placement:"left"}},methods:{menuSider:function(){this.showSider?this.mainSiderWidth=40:(this.mainSiderWidth=300,window.scrollTo(0,0)),this.showSider=!this.showSider},handleOrganizationInfo:function(){var t=this,e=this.$createElement;this.$info({title:"Institution Information",content:e("div",{},[e("p",t.organization.organization),e("p",t.organization.ip)]),onOk:function(){}})},switchAdvance:function(){if(this.advance=!this.advance,this.advance&&""!=this.querytemp.trim()){this.querytemp=this.querytemp.trim();while(-1!=this.querytemp.indexOf("  "))this.querytemp=this.querytemp.replace("  "," ");this.querytemp=this.querytemp.replace(/ AND /g,"#AND#"),this.querytemp=this.querytemp.replace(/ OR /g,"#OR#"),this.querytemp=this.querytemp.replace(/ NOT /g,"#NOT#"),this.querytemp=this.querytemp.replace(/: /g,":"),this.querytemp=this.querytemp.replace(/ :/g,":"),this.querytemp=this.querytemp.replace(/title:/gi,"title:"),this.querytemp=this.querytemp.replace(/icontributor:/gi,"icontributor:"),this.querytemp=this.querytemp.replace(/ipublisher:/gi,"ipublisher:"),this.querytemp=this.querytemp.replace(/description:/gi,"description:"),this.querytemp=this.querytemp.replace(/ /g,"+"),this.querytemp=this.querytemp.replace(/#/g," ");for(var t=this.querytemp.split(" "),e=1,a=0;a<t.length;a++){var i=t[a];"AND"!=i&&"OR"!=i&&"NOT"!=i||(e+=1)}this.resetAdvanceSearch();while(this.searchFieldNum<e)this.addSearchRow();var r=0,s=0,o=0;for(a=0;a<t.length;a++){i=t[a];if("AND"==i||"OR"==i||"NOT"==i)this.searchFieldBool[o]=i,o+=1;else if(-1!=i.indexOf(":")){var n=i.split(":")[0],l=i.split(":")[1];if("year"==n&&-1!=l.indexOf("[")&&-1!=l.indexOf("]")&&-1!=l.indexOf("TO")){l=l.replace("["," "),l=l.replace("]"," "),l=l.replace(/\+/g," "),l=l.trim();var c=l.split("TO")[0];c=c.trim();try{var u=parseInt(c);this.searchFieldStart=u}catch(p){}var h=l.split("TO")[1];h=h.trim();try{var d=parseInt(h);this.searchFieldEnd=d}catch(p){}}else l=l.replace(/\+/g," "),l=l.replace(/"/g,""),this.searchFieldField[r]=n,this.searchFieldContent[s]=l,r+=1,s+=1}else i=i.replace(/\+/g," "),i=i.replace(/"/g,""),this.searchFieldField[r]="*",this.searchFieldContent[s]=i,r+=1,s+=1}}},addSearchRow:function(){this.searchFieldContent[this.searchFieldNum]="",this.searchFieldField[this.searchFieldNum]="*",this.searchFieldBool[this.searchFieldNum]="AND",this.searchFieldNum+=1},resetAdvanceSearch:function(){this.searchFieldNum=3,this.searchFieldContent=["","",""],this.searchFieldField=["*","*","*"],this.searchFieldBool=["AND","AND","AND"],this.searchFieldStart="",this.searchFieldEnd=""},updateSearchField:function(t,e){this.searchFieldField[e]=t},updateSearchBool:function(t,e){this.searchFieldBool[e]=t},executeAdvanceSearch:function(){for(var t="",e=[],a=[],i=0;i<this.searchFieldNum;i++){var r=this.searchFieldContent[i];if(void 0!=r&&""!=r.trim()){-1!=r.indexOf(" ")&&(r='"'+r.trim()+'"');var s=this.searchFieldField[i];"*"==s?s="":s+=":",e.push(s+r);var o=this.searchFieldBool[i];a.push(o)}}for(var n=0;n<e.length;n++)t+=0==n?e[n]+" ":a[n-1]+" "+e[n]+" ";this.querytemp=t.trim(),void 0!=this.searchFieldStart&&this.searchFieldStart>0&&(void 0==this.searchFieldEnd||""==this.searchFieldEnd||0==this.searchFieldEnd)&&(this.querytemp.length>0&&(this.querytemp+=" AND "),this.querytemp+="year:["+this.searchFieldStart+" TO *]"),void 0!=this.searchFieldEnd&&this.searchFieldEnd>0&&(void 0==this.searchFieldStart||""==this.searchFieldStart||0==this.searchFieldStart)&&(this.querytemp.length>0&&(this.querytemp+=" AND "),this.querytemp+="year:[* TO "+this.searchFieldEnd+"]"),void 0!=this.searchFieldStart&&this.searchFieldStart>0&&void 0!=this.searchFieldEnd&&this.searchFieldEnd>0&&(this.querytemp.length>0&&(this.querytemp+=" AND "),this.querytemp+="year:["+this.searchFieldStart+" TO "+this.searchFieldEnd+"]"),this.advance=!1,this.search()},logout:function(){var t=this;this.$confirm({title:"Are you sure you want to log out?",content:"",iconType:"warning",okText:"Yes",cancelText:"No",onOk:function(){t.userSignOut()},onCancel:function(){}})},userSignOut:function(){var t=this.$localStorage.get("token"),e=this;this.$localStorage.remove("token"),this.axios.request({url:"/revoke/"+t,method:"GET",headers:{"content-type":"application/json"}}).then((function(t){e.$router.push("/portal/")})).catch((function(t){console.log(t),e.$router.push("/portal/")}))},goBrowsePage:function(){this.$router.push("/browse/").catch((function(t){}))},goSearchPage:function(){this.$router.push("/search/").catch((function(t){}))},onStartYearChange:function(t){this.startYear=t,this.startYear>=this.currentYear?this.startYear=this.currentYear:this.minyear>0&&this.startYear>0&&this.startYear<this.minyear?this.startYear=this.minyear:this.startYear<1?this.startYear="":this.startYear<0&&(this.startYear=""),this.startYear=this.startYear.trim()},onEndYearChange:function(t){this.endYear=t,this.endYear>=this.currentYear?this.endYear=this.currentYear:this.endYear<1?this.endYear="":this.endYear<0&&(this.endYear=""),this.endYear=this.endYear.trim()},handleYearSearch:function(){if(!this.searching){if(this.endYear>0&&this.endYear<this.startYear&&this.startYear>0){var t=this.endYear;this.endYear=this.startYear,this.startYear=t}(this.endYear>0||this.startYear>0)&&(this.startYear>0&&this.endYear>0?this.year=this.startYear+","+this.endYear:this.startYear>0&&""==this.endYear?this.year=this.startYear+",*":""==this.startYear&&this.endYear>0&&(this.year="*,"+this.endYear),this.initialSearch())}},handleYearClean:function(){this.searching||(this.currentpage=1,this.start=1,this.end=this.rows,this.year="*",this.startYear="",this.endYear="",this.initialSearch())},handlePublisherClean:function(){this.searching||(this.currentpage=1,this.start=1,this.end=this.rows,this.publisher="*",this.initialSearch())},handleLanguageClean:function(){this.searching||(this.currentpage=1,this.start=1,this.end=this.rows,this.language="*",this.initialSearch())},handleCollectionClean:function(){this.searching||(this.currentpage=1,this.start=1,this.end=this.rows,this.collection="*",this.initialSearch())},handleSubjectClean:function(){this.searching||(this.currentpage=1,this.start=1,this.end=this.rows,this.subject="*",this.initialSearch())},handleContributorClean:function(){this.searching||(this.currentpage=1,this.start=1,this.end=this.rows,this.contributor="*",this.initialSearch())},loadMoreLanguage:function(){for(var t=this.languageFilter.length,e=t+this.filtersize,a=0;a<this.Data.language.length;a++)if(a>=this.languageFilter.length){if(!(this.languageFilter.length<e))break;this.languageFilter.push(this.Data.language[a])}},loadMorePublisher:function(){for(var t=this.publisherFilter.length,e=t+this.filtersize,a=0;a<this.Data.publisher.length;a++)if(a>=this.publisherFilter.length){if(!(this.publisherFilter.length<e))break;this.publisherFilter.push(this.Data.publisher[a])}},loadMoreCollection:function(){for(var t=this.collectionFilter.length,e=t+this.filtersize,a=0;a<this.Data.collection.length;a++)if(a>=this.collectionFilter.length){if(!(this.collectionFilter.length<e))break;this.collectionFilter.push(this.Data.collection[a])}},loadMoreSubject:function(){for(var t=this.subjectFilter.length,e=t+this.filtersize,a=0;a<this.Data.subject.length;a++)if(a>=this.subjectFilter.length){if(!(this.subjectFilter.length<e))break;this.subjectFilter.push(this.Data.subject[a])}},loadMoreContributor:function(){for(var t=this.contributorFilter.length,e=t+this.filtersize,a=0;a<this.Data.contributor.length;a++)if(a>=this.contributorFilter.length){if(!(this.contributorFilter.length<e))break;this.contributorFilter.push(this.Data.contributor[a])}},switchpage:function(t,e){this.searching||(1==t?(this.start=1,this.end=this.rows):(this.start=(parseInt(t)-1)*parseInt(e)+1,this.start+(this.rows-1)>=this.Data.response.numFound?this.end=this.Data.response.numFound:this.end=this.start+(this.rows-1)),this.currentpage=t,this.initialSearch())},applyFilter:function(t,e){this.searching||(this.currentpage=1,this.start=1,this.end=this.rows,"language"==t?this.language=e:"publisher"==t?this.publisher=e:"collection"==t?this.collection=e:"subject"==t?this.subject=e:"contributor"==t&&(this.contributor=e),this.initialSearch())},applyResultFilter:function(t,e){this.searching||(this.currentpage=1,this.start=1,this.end=this.rows,this.publisher="*",this.year="*",this.language="*",this.subject="*",this.contributor="*",this.collection="*","language"==t?this.language=e:"publisher"==t?this.publisher=e:"collection"==t?this.collection=e:"subject"==t?this.subject=e:"contributor"==t&&(this.contributor=e),this.initialSearch())},switchsize:function(t,e){this.searching||(this.currentpage=1,this.start=1,this.rows=e,this.end=this.rows,this.initialSearch())},search:function(t,e){this.searching||(this.query=this.querytemp,this.dataSource=[],this.startYear="",this.endYear="",this.start=1,this.sort="relevancy",this.currentpage=1,this.initialSearch())},hltitle:function(t,e){try{return this.Data.highlighting[t].title[0]}catch(a){}return e},hldescription:function(t,e){try{return this.Data.highlighting[t].description[0]}catch(a){}return e},linkDetail:function(t,e){0==t?this.detail(e):this.catalog(e)},detail:function(t){var e=this.$router.resolve({name:"detail",params:{id:t}}),a=e.href;window.open(a,"_blank")},catalog:function(t){var e=this.$router.resolve({name:"catalog",params:{id:t}}),a=e.href;window.open(a,"_blank")},reset:function(){this.startYear="",this.endYear="",this.start=1,this.sort="yeardesc",this.query="*",this.querytemp="",this.previousconfirmquery="",this.format="*",this.publisher="*",this.year="*",this.language="*",this.subject="*",this.contributor="*",this.collection="*",this.currentpage=1,this.initialSearch()},changeOrder:function(t){this.searching||(this.start=1,this.sort=t,this.initialSearch())},suggestion:function(){try{this.dataSource=[],this.dataOpen=!1,clearTimeout(this.suggestionTimer)}catch(t){}this.suggestionTimer=setTimeout(this.retrieveSuggestion,1500)},retrieveSuggestion:function(){this.dataOpen=!1;var t=this;if(this.querytemp!=this.query&&-1==this.querytemp.indexOf("(")&&-1==this.querytemp.indexOf(")")&&-1==this.querytemp.indexOf("~")&&-1==this.querytemp.indexOf("<")&&-1==this.querytemp.indexOf(">")&&-1==this.querytemp.indexOf("?")&&-1==this.querytemp.indexOf("*")&&-1==this.querytemp.indexOf("[")&&-1==this.querytemp.indexOf("]")&&-1==this.querytemp.indexOf("{")&&-1==this.querytemp.indexOf("}")&&-1==this.querytemp.indexOf(":")&&this.querytemp.length>2){var e=this.querytemp.trim(),a="",i="";if(e.lastIndexOf(" ")>3?(a=e.substring(0,e.lastIndexOf(" ")),i=e.substring(e.lastIndexOf(" ")+1)):i=e,i!=this.previousconfirmquery&&i.length>2){var r=this.portal+"/data/suggest/"+i+"?"+new Date;r=encodeURI(r),this.$axios.get(r,{headers:{Authorization:"Bearer "+t.$localStorage.get("token")}}).then((function(e){if(e.data.length>0){t.dataSource.push(t.querytemp);for(var r=0;r<e.data.length;r++){var s="";s=a.length>0?a+" "+e.data[r]:e.data[r],t.dataSource.includes(s)||t.dataSource.push(s)}t.dataOpen=!0,t.previousconfirmquery=i}else t.dataSource=[],t.dataOpen=!1}))}else t.dataSource=[]}else t.dataSource=[]},updateURL:function(){history.pushState({},null,"/#/search/"+this.year+"/"+this.language+"/"+this.collection+"/"+this.publisher+"/"+this.subject+"/"+this.contributor+"/"+this.start+"/"+this.rows+"/"+this.query)},encode:function(t){if("*"==t)return t;var e=z.encode(t);return e=encodeURI(e),e=e.replace(/=/g,"@"),e=e.replace(/\+/g,"@"),e=e.replace(/\//g,"@"),e},checkDownload:function(t){this.$refs[t+"_display"].style.display="none",this.$refs[t+"_loading"].style.display="block";var e=this,a=this.portal+"/data/checkpdf/"+t;this.$axios.get(a,{headers:{Authorization:"Bearer "+e.$localStorage.get("token")}}).then((function(a){1==a.data?e.downloadPdf(t):e.downloadMirror(t)})).catch((function(t){}))},downloadMirror:function(t){this.$refs[t+"_display"].style.display="block",this.$refs[t+"_loading"].style.display="none";var e=this,a=this.portal+"/data/download/search/"+t;this.$axios.get(a,{headers:{Authorization:"Bearer "+e.$localStorage.get("token")}}).then((function(e){window.open(e.data,t)})).catch((function(t){}))},downloadPdf:function(t){var e=this,a=this.portal+"/data/download/search/"+t;this.$axios({url:a,method:"GET",responseType:"plain/text",headers:{Authorization:"Bearer "+e.$localStorage.get("token")}}).then((function(a){var i=document.createElement("a");i.href=a.data,i.setAttribute("target",t),document.body.appendChild(i),i.click(),e.$refs[t+"_display"].style.display="block",e.$refs[t+"_loading"].style.display="none"}))},initialSearch:function(){this.searching=!0;var t=this;t.dataSource=[],window.scrollTo(0,0);var e="*";e=this.query,""==e?e="*":(e=this.query,e.indexOf(" ")>2&&-1==e.indexOf(":")&&-1==e.indexOf(")")&&-1==e.indexOf("(")&&-1==e.indexOf("*")&&-1==e.indexOf("~")&&-1==e.indexOf("^")&&-1==e.indexOf("-")&&-1==e.indexOf("AND")&&-1==e.indexOf("OR")&&(e='"'+e+'"'),e.indexOf("/")>0&&(e=e.replace(/\//g," ")));var a=this.portal+"/data/search/"+this.format+"/"+this.year+"/"+this.encode(this.language)+"/"+this.encode(this.collection)+"/"+this.encode(this.publisher)+"/"+this.encode(this.subject)+"/"+this.encode(this.contributor)+"/"+(this.start-1)+"/"+this.rows+"/"+encodeURI(e);""!=this.sort&&"relevancy"!=this.sort&&(a+="?sort="+this.sort);var i="";void 0!=this.organization.index&&(i=this.organization.index),this.$axios.get(a,{headers:{Authorization:"Bearer "+t.$localStorage.get("token"),index:i}}).then((function(e){if(t.Data=e.data,void 0!=t.Data.response&&void 0!=t.Data.response.numFound&&t.Data.response.numFound>0){try{if(void 0!=t.Data.language){for(var a=[],i="",r=0;r<t.Data.language.length;r++)if(r%2==0)i=t.Data.language[r];else{var s={};s.title=i,s.count=t.Data.language[r],-1!=t.language.indexOf(i)?s.check=!0:s.check=!1,a.push(s)}t.Data.language=a,t.Data.language.sort((function(t,e){return t.count<e.count?1:-1}))}}catch(o){console.log(o)}try{if(void 0!=t.Data.collection){for(a=[],i="",r=0;r<t.Data.collection.length;r++)if(r%2==0)i=t.Data.collection[r];else{s={};s.title=i,s.count=t.Data.collection[r],-1!=t.collection.indexOf(i)?s.check=!0:s.check=!1,a.push(s)}t.Data.collection=a,t.Data.collection.sort((function(t,e){return t.count<e.count?1:-1}))}}catch(o){}try{if(void 0!=t.Data.publisher){for(a=[],i="",r=0;r<t.Data.publisher.length;r++)if(r%2==0)i=t.Data.publisher[r];else{s={};s.title=i,s.count=t.Data.publisher[r],-1!=t.publisher.indexOf(i)?s.check=!0:s.check=!1,a.push(s)}t.Data.publisher=a,t.Data.publisher.sort((function(t,e){return t.count<e.count?1:-1}))}}catch(o){}try{if(void 0!=t.Data.contributor){for(a=[],i="",r=0;r<t.Data.contributor.length;r++)if(r%2==0)i=t.Data.contributor[r];else{s={};s.title=i,s.count=t.Data.contributor[r],-1!=t.contributor.indexOf(i)?s.check=!0:s.check=!1,a.push(s)}t.Data.contributor=a,t.Data.contributor.sort((function(t,e){return t.count<e.count?1:-1}))}}catch(o){}try{if(void 0!=t.Data.subject){for(a=[],i="",r=0;r<t.Data.subject.length;r++)if(r%2==0)i=t.Data.subject[r];else{s={};s.title=i,s.count=t.Data.subject[r],-1!=t.subject.indexOf(i)?s.check=!0:s.check=!1,a.push(s)}t.Data.subject=a,t.Data.subject.sort((function(t,e){return t.count<e.count?1:-1}))}}catch(o){}t.formatFilter=[],t.yearFilter=[],t.languageFilter=[],t.collectionFilter=[],t.publisherFilter=[],t.contributorFilter=[],t.subjectFilter=[];try{for(r=0;r<t.Data.language.length;r++){if(!(t.languageFilter.length<t.filtersize))break;t.languageFilter.push(t.Data.language[r])}}catch(n){}try{for(r=0;r<t.Data.collection.length;r++){if(!(t.collectionFilter.length<t.filtersize))break;t.collectionFilter.push(t.Data.collection[r])}}catch(n){}try{for(r=0;r<t.Data.publisher.length;r++){if(!(t.publisherFilter.length<t.filtersize))break;t.publisherFilter.push(t.Data.publisher[r])}}catch(n){}try{for(r=0;r<t.Data.contributor.length;r++){if(!(t.contributorFilter.length<t.filtersize))break;t.contributorFilter.push(t.Data.contributor[r])}}catch(n){}try{for(r=0;r<t.Data.subject.length;r++){if(!(t.subjectFilter.length<t.filtersize))break;t.subjectFilter.push(t.Data.subject[r])}}catch(n){}try{t.maxyear=t.Data.yearstat.max,t.minyear=t.Data.yearstat.min,t.currentYear=t.maxyear,t.maxyear>0&&(t.endYear=t.maxyear),t.minyear>0&&(t.startYear=t.minyear)}catch(n){}}setTimeout(t.resetSearchStatus,500),t.updateURL()})).catch((function(e){setTimeout(t.resetSearchStatus,500)}))},updateCoverDisplay:function(){var t=this,e=this.portal+"/data/cover/url";e=encodeURI(e),this.$axios.get(e,{headers:{Authorization:"Bearer "+t.$localStorage.get("token")}}).then((function(e){t.prepareCoverDisplay(e.data)}))},prepareCoverDisplay:function(t){for(var e=0;e<this.Data.response.docs.length;e++){var a=this.Data.response.docs[e].id,i=a.substring(0,5),r=a.substring(5),s="",o=r;4==o.length&&o.length<=6?s=i+"/"+o.substring(0,3)+"/"+o.substring(3)+"/"+a+"/":o.length>=7&&o.length<=9?s=i+"/"+o.substring(0,3)+"/"+o.substring(3,6)+"/"+o.substring(6)+"/"+a+"/":o.length>=9&&o.length<=12?s=i+"/"+o.substring(0,3)+"/"+o.substring(3,6)+"/"+o.substring(6,9)+"/"+o.substring(9)+"/"+a+"/":o.length>=12&&o.length<=15&&(s=i+"/"+o.substring(0,3)+"/"+o.substring(3,6)+"/"+o.substring(6,9)+"/"+o.substring(9,12)+"/"+o.substring(12)+"/"+a+"/");var n=this.Data.response.docs[e].imageurl,l=t+s+a+"_original";void 0!=n&&-1!=n.indexOf(".jpg")?l+=".jpg":l+=".gif";var c=t+s+a+"_250.png";setTimeout(this.actualCoverDisplay(e,l,n,c),500)}},actualCoverDisplay:function(t,e,a,i){try{var r=new Image;r.src=e;var s=this;r.onerror=function(){var e=new Image;e.src=a;var r=s;e.onerror=function(){var e=new Image;e.src=i;var a=r;e.onerror=function(){},e.onload=function(){a.Data.response.docs[t].imageurl=i}},e.onload=function(){r.Data.response.docs[t].imageurl=a}},r.onload=function(){s.Data.response.docs[t].imageurl=e}}catch(o){}},resetSearchStatus:function(){this.searching=!1},initialCreatedSearch:function(){void 0!=this.$route.params.year&&this.$route.params.year.length>0&&(this.year=this.$route.params.year),void 0!=this.$route.params.language&&this.$route.params.language.length>0&&(this.language=this.$route.params.language),void 0!=this.$route.params.collection&&this.$route.params.collection.length>0&&(this.collection=this.$route.params.collection),void 0!=this.$route.params.publisher&&this.$route.params.publisher.length>0&&(this.publisher=this.$route.params.publisher),void 0!=this.$route.params.subject&&this.$route.params.subject.length>0&&(this.subject=this.$route.params.subject),void 0!=this.$route.params.contributor&&this.$route.params.contributor.length>0&&(this.contributor=this.$route.params.contributor),void 0!=this.$route.params.start&&this.$route.params.start.length>0&&(this.start=this.$route.params.start),void 0!=this.$route.params.rows&&this.$route.params.rows.length>0&&(this.rows=this.$route.params.rows),void 0!=this.$route.params.query&&this.$route.params.query.length>0&&(this.query=this.$route.params.query,"*"!=this.query&&(this.querytemp=this.query)),this.initialSearch()},verifyCreated:function(){var t=this;if(document.title="World Library: Main Search Page",null==this.$localStorage.get("token")||void 0==this.$localStorage.get("token")||""==this.$localStorage.get("token")){if(void 0!=this.$route.query){var e=this.$route.query.AffiliateKey;void 0==e&&(e=this.$route.query.affiliatekey,void 0==e&&(e=this.$route.query.AFFILIATEKEY))}void 0!=e?this.axios.request({url:"/verify/key?AffiliateKey="+e,method:"GET",headers:{"content-type":"application/json"}}).then((function(e){void 0!=e.data.access_token?(t.$localStorage.set("token",e.data.access_token),t.initialCreatedSearch()):(alert("You don't have permission to access this service"),t.userSignOut())})).catch((function(t){})):this.axios.request({url:"/verify",method:"GET",headers:{"content-type":"application/json"}}).then((function(e){void 0!=e.data.access_token?(t.$localStorage.set("token",e.data.access_token),t.initialCreatedSearch()):(alert("You don't have permission to access this service"),t.userSignOut())})).catch((function(t){}))}else this.initialCreatedSearch()},updateImageUrl:function(t){return this.imageroot+t},showDrawer:function(){this.visible=!this.visible}},mounted:function(){var t=this;window.onresize=function(){return function(){window.screenWidth=document.body.clientWidth,t.screenWidth=window.screenWidth}()},t.screenWidth<579?(t.mainSiderWidth=40,t.showSider=!1):(t.mainSiderWidth=300,t.showSider=!0)},filters:{removeDot:function(t){if(void 0!=t&&""!=t){var e=t.substring(t.length-1);return"."==e?t.substring(0,t.length-1):t}},commas:function(t){try{var e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}catch(a){return t}}},created:function(){var t=this;null!=this.$localStorage.get("token")&&void 0!=this.$localStorage.get("token")&&""!=this.$localStorage.get("token")?this.$axios.get("/info/",{headers:{Authorization:"Bearer "+t.$localStorage.get("token")}}).then((function(e){t.organization=e.data,t.verifyCreated()})).catch((function(e){t.$localStorage.remove("token"),t.verifyCreated()})):this.verifyCreated()},computed:{rowsInteger:function(){return parseInt(this.rows)},normalPublisher:function(){return this.publisher},DataList:function(){var t=[];try{t=this.Data.response.docs}catch(e){t=[]}return t},total:function(){var t=0;try{t=this.Data.response.numFound}catch(e){}return t}}},B=E,M=(a("decd"),Object(c["a"])(B,$,q,!1,null,"4e6c372e",null)),U=M.exports,W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-layout",[i("a-layout-header",{staticClass:"top-header"},[i("a-row",{staticClass:"top-header",attrs:{type:"flex",align:"middle",justify:"space-between"}},[i("a-col",{attrs:{span:6,sm:6,xs:4}},[i("img",{staticClass:"header-image",attrs:{src:a("c6d2")},on:{click:function(e){return t.goBrowsePage()}}})]),i("a-col",{attrs:{span:18,sm:18,xs:0}},[i("a-row",{attrs:{type:"flex",justify:"end"}},[i("span",{staticClass:"control-icon control-current",on:{click:function(e){return t.goBrowsePage()}}},[i("a-icon",{attrs:{type:"unordered-list"}}),t._v("\n            Browse\n          ")],1),i("span",{staticClass:"control-icon ",on:{click:function(e){return t.goSearchPage()}}},[i("a-icon",{attrs:{type:"search"}}),t._v("\n            Search\n          ")],1),i("span",{staticClass:"control-icon",on:{click:function(e){return t.handleOrganizationInfo()}}},[i("a-icon",{attrs:{type:"bank",title:"Institution Information"}}),t._v("\n            Institution\n          ")],1),i("span",{staticClass:"control-icon",on:{click:function(e){return t.logout()}}},[i("a-icon",{attrs:{type:"logout"}}),t._v("\n            Log out\n          ")],1)])],1),i("a-col",{attrs:{xs:20,sm:0}},[i("a-row",{attrs:{type:"flex",justify:"end"}},[i("a-button",{staticClass:"menu-icon",on:{click:t.showDrawer}},[i("a-icon",{attrs:{type:"menu"}})],1)],1)],1),i("a-drawer",{staticStyle:{"font-size":"22px"},attrs:{title:"WorldLibrary",placement:t.placement,closable:!1,visible:t.visible},on:{close:t.showDrawer}},[i("p",{staticClass:"control-icon control-current",on:{click:function(e){return t.goBrowsePage()}}},[i("a-icon",{attrs:{type:"unordered-list"}}),t._v("\n          Browse\n        ")],1),i("p",{staticClass:"control-icon ",on:{click:function(e){return t.goSearchPage()}}},[i("a-icon",{attrs:{type:"search"}}),t._v("\n          Search\n        ")],1),i("p",{staticClass:"control-icon",on:{click:function(e){return t.handleOrganizationInfo()}}},[i("a-icon",{attrs:{type:"bank",title:"Institution Information"}}),t._v("\n          Institution\n        ")],1),i("p",{staticClass:"control-icon",on:{click:function(e){return t.logout()}}},[i("a-icon",{attrs:{type:"logout"}}),t._v("\n          Log out\n        ")],1)])],1)],1),i("a-layout",[i("a-layout-content",{staticClass:"main-content"},[void 0==t.Record.id?i("a-row",{staticStyle:{margin:"150px","text-align":"center"}},[i("a-spin",{attrs:{tip:"Loading ..."}})],1):t._e(),void 0!=t.Record.id&&"error"==t.Record.id?i("a-row",{staticStyle:{margin:"150px","text-align":"center"}},[i("a-icon",{staticStyle:{"font-size":"72pt",margin:"25px"},attrs:{type:"warning"}}),i("div",{staticStyle:{"font-size":"14pt"}},[t._v("\n          The record you have requested does not exists.\n        ")])],1):t._e(),void 0!=t.Record.id&&"error"!=t.Record.id?i("a-row",[i("a-col",{attrs:{xs:2,sm:3,md:4}}),i("a-col",{attrs:{xs:24,sm:18,md:16}},[i("a-row",{staticClass:"record",staticStyle:{"margin-bottom":"0px"}},[i("a-col",{attrs:{align:"start"}},[i("a-row",{staticClass:"record-title"},[i("a-col",[t._v(t._s(t.Record.title))])],1),i("a-row",{staticClass:"record-extra"})],1)],1)],1),i("a-col",{attrs:{xs:2,sm:3,md:4}})],1):t._e(),void 0!=t.Record.id&&"error"!=t.Record.id?i("a-row",[i("a-col",{attrs:{xs:2,sm:3,md:4}}),i("a-col",{attrs:{xs:0,sm:18,md:16}},[i("a-divider"),i("a-list",{staticStyle:{"text-align":"left"},attrs:{itemLayout:"vertical",size:"large",dataSource:t.Catalog},scopedSlots:t._u([{key:"renderItem",fn:function(e,a){return i("a-list-item",{key:"item.id",staticStyle:{padding:"0px"}},[i("a-row",{staticClass:"record"},[i("a-col",{staticClass:"record-year",attrs:{xs:2,sm:2,md:2,lg:2}},[void 0!=e.year&&e.year>0?i("span",[t._v(t._s(e.year))]):t._e(),void 0==e.year||0==e.year?i("span",[t._v("Unknow")]):t._e()]),i("a-col",{attrs:{xs:12,sm:8,md:6,lg:4,align:"center"},on:{click:function(e){return t.detail()}}},[i("img",{staticClass:"record-image",staticStyle:{cursor:"pointer"},attrs:{width:"100px",src:t.updateImageUrl(e.image)},on:{click:function(a){return t.detail(e.id)}}})]),i("a-col",{attrs:{xs:10,sm:14,md:16,lg:18,align:"start"}},[t._l(e.language,(function(e,a){return i("span",{staticClass:"record-language"},[i("span",{directives:[{name:"show",rawName:"v-show",value:a>0,expression:"lindex > 0"}]},[t._v(",")]),t._v("\n                    "+t._s(e)+"\n                  ")])})),e.page>0?i("span",[t._v("; "+t._s(e.page)+" Pages")]):t._e(),void 0!=e.contributor&&e.contributor.length>0?i("span",{staticClass:"record-author"},[i("span",[t._v("; ")]),t._l(e.contributor,(function(e,a){return i("span",[i("span",{directives:[{name:"show",rawName:"v-show",value:a>0,expression:"aindex > 0"}]},[t._v(", ")]),t._v("\n                      "+t._s(e)+"\n                    ")])}))],2):t._e(),void 0!=e.contributor&&e.contributor.length>0?i("span",{staticClass:"record-extra"},[i("span",[t._v("; ")]),t._l(e.publisher,(function(e,a){return i("span",[i("span",{directives:[{name:"show",rawName:"v-show",value:a>0,expression:"pindex > 0"}]},[t._v(", ")]),t._v("\n                      "+t._s(e)+"\n                    ")])}))],2):t._e(),i("a-row",t._l(e.collection,(function(e,a){return i("span",[i("span",{directives:[{name:"show",rawName:"v-show",value:a>0,expression:"cindex > 0"}]},[t._v(" ,")]),t._v("\n                      "+t._s(e)+"\n                    ")])})),0),void 0!=e.subject&&e.subject.length>0?i("a-row",{staticClass:"record-extra"},t._l(e.subject,(function(e,a){return i("span",[i("span",{directives:[{name:"show",rawName:"v-show",value:a>0,expression:"sindex > 0"}]},[t._v(" ,")]),t._v("\n                      "+t._s(e)+"\n                    ")])})),0):t._e(),i("a-row",{staticClass:"record-abstract"},[t._v("\n                    "+t._s(e.description)+"\n                  ")]),i("a-row",{staticClass:"record-id"},[t._v("\n                    "+t._s(e.id)+"\n                  ")]),i("a-row",{staticClass:"record-action-section",attrs:{title:"Click to download the PDF"}},[i("span",{ref:e.id+"_display",staticClass:"record-action"},[i("a",{attrs:{title:"Click to download the PDF"},on:{click:function(a){return t.checkDownload(e.id)}}},[t._v("Download PDF\n                        "),e.size?i("span",[t._v("("+t._s(t._f("removeDot")(e.size))+")")]):t._e()])]),i("div",{ref:e.id+"_loading",staticClass:"record-action-loading"},[i("a-spin",{attrs:{tip:"Loading ..."}})],1)])],2)],1)],1)}}],null,!1,3352287751)})],1),i("a-col",{attrs:{xs:24,sm:0}},[i("a-divider"),i("a-list",{staticStyle:{"text-align":"left"},attrs:{itemLayout:"vertical",size:"large",dataSource:t.Catalog},scopedSlots:t._u([{key:"renderItem",fn:function(e,a){return i("a-list-item",{key:"item.id",staticStyle:{padding:"0px"}},[i("a-row",{staticClass:"record"},[i("a-col",{staticClass:"record-year",staticStyle:{"margin-bottom":"8px"},attrs:{xs:24,sm:2,md:2,lg:2}},[i("span",{staticClass:"record-section-title"},[t._v("Publication Year：")]),void 0!=e.year&&e.year>0?i("span",[t._v(t._s(e.year))]):t._e(),void 0==e.year||0==e.year?i("span",[t._v("Unknow")]):t._e()]),i("a-col",{attrs:{xs:8,sm:8,md:6,lg:4,align:"left"},on:{click:function(e){return t.detail()}}},[i("img",{staticClass:"record-image",staticStyle:{cursor:"pointer"},attrs:{width:"100px",src:t.updateImageUrl(e.image)},on:{click:function(a){return t.detail(e.id)}}})]),i("a-col",{attrs:{xs:16,sm:14,md:16,lg:18,align:"start"}},[t._l(e.language,(function(e,a){return i("span",{staticClass:"record-language"},[i("span",{directives:[{name:"show",rawName:"v-show",value:a>0,expression:"lindex > 0"}]},[t._v(",")]),t._v("\n                    "+t._s(e)+"\n                  ")])})),e.page>0?i("span",[t._v("; "+t._s(e.page)+" Pages")]):t._e(),void 0!=e.contributor&&e.contributor.length>0?i("span",{staticClass:"record-author"},[i("span",[t._v("; ")]),t._l(e.contributor,(function(e,a){return i("span",[i("span",{directives:[{name:"show",rawName:"v-show",value:a>0,expression:"aindex > 0"}]},[t._v(", ")]),t._v("\n                      "+t._s(e)+"\n                    ")])}))],2):t._e(),void 0!=e.contributor&&e.contributor.length>0?i("span",{staticClass:"record-extra"},[i("span",[t._v("; ")]),t._l(e.publisher,(function(e,a){return i("span",[i("span",{directives:[{name:"show",rawName:"v-show",value:a>0,expression:"pindex > 0"}]},[t._v(", ")]),t._v("\n                      "+t._s(e)+"\n                    ")])}))],2):t._e(),i("a-row",t._l(e.collection,(function(e,a){return i("span",[i("span",{directives:[{name:"show",rawName:"v-show",value:a>0,expression:"cindex > 0"}]},[t._v(" ,")]),t._v("\n                      "+t._s(e)+"\n                    ")])})),0),void 0!=e.subject&&e.subject.length>0?i("a-row",{staticClass:"record-extra"},t._l(e.subject,(function(e,a){return i("span",[i("span",{directives:[{name:"show",rawName:"v-show",value:a>0,expression:"sindex > 0"}]},[t._v(" ,")]),t._v("\n                      "+t._s(e)+"\n                    ")])})),0):t._e(),i("a-row",{staticClass:"record-abstract"},[t._v("\n                    "+t._s(e.description)+"\n                  ")]),i("a-row",{staticClass:"record-id"},[t._v("\n                    "+t._s(e.id)+"\n                  ")]),i("a-row",{staticClass:"record-action-section",attrs:{title:"Click to download the PDF"}},[i("span",{ref:e.id+"_display",staticClass:"record-action"},[i("a",{attrs:{title:"Click to download the PDF"},on:{click:function(a){return t.checkDownload(e.id)}}},[t._v("Download PDF\n                        "),e.size?i("span",[t._v("("+t._s(t._f("removeDot")(e.size))+")")]):t._e()])]),i("div",{ref:e.id+"_loading",staticClass:"record-action-loading"},[i("a-spin",{attrs:{tip:"Loading ..."}})],1)])],2)],1)],1)}}],null,!1,3135803747)})],1),i("a-col",{attrs:{xs:2,sm:3,md:4}})],1):t._e()],1),i("a-layout-footer",{staticClass:"main-footer"},[i("div",{attrs:{align:"center"}},[t._v("\n        Copyright © 2020 World Library. All rights reserved.\n      ")])])],1)],1)},G=[],V={},K=[],H={data:function(){return{organization:{},Record:V,Catalog:K,visible:!1,placement:"left"}},methods:{handleOrganizationInfo:function(){var t=this,e=this.$createElement;this.$info({title:"Institution Information",content:e("div",{},[e("p",t.organization.organization),e("p",t.organization.ip)]),onOk:function(){}})},logout:function(){var t=this;this.$confirm({title:"Are you sure you want to log out?",content:"",iconType:"warning",okText:"Yes",cancelText:"No",onOk:function(){t.userSignOut()},onCancel:function(){}})},userSignOut:function(){var t=this.$localStorage.get("token"),e=this;this.$localStorage.remove("token"),this.axios.request({url:"/revoke/"+t,method:"GET",headers:{"content-type":"application/json"}}).then((function(t){e.$router.push("/portal/")})).catch((function(t){console.log(t),e.$router.push("/portal/")}))},goBrowsePage:function(){this.$router.push("/browse/").catch((function(t){}))},goSearchPage:function(){this.$router.push("/search/").catch((function(t){}))},detail:function(t){var e=this.$router.resolve({name:"detail",params:{id:t}}),a=e.href;window.open(a,"_blank")},checkDownload:function(t){this.$refs[t+"_display"].style.display="none",this.$refs[t+"_loading"].style.display="block";var e=this,a=this.portal+"/data/checkpdf/"+t;this.$axios.get(a,{headers:{Authorization:"Bearer "+e.$localStorage.get("token")}}).then((function(a){1==a.data?e.downloadPdf(t):e.downloadMirror(t)})).catch((function(t){}))},downloadMirror:function(t){this.$refs[t+"_display"].style.display="block",this.$refs[t+"_loading"].style.display="none";var e=this,a=this.portal+"/data/download/catalog/"+t;this.$axios.get(a,{headers:{Authorization:"Bearer "+e.$localStorage.get("token")}}).then((function(e){window.open(e.data,t)})).catch((function(t){}))},downloadPdf:function(t){var e=this,a=this.portal+"/data/download/catalog/"+t;this.$axios({url:a,method:"GET",responseType:"plain/text",headers:{Authorization:"Bearer "+e.$localStorage.get("token")}}).then((function(a){var i=document.createElement("a");i.href=a.data,i.setAttribute("target",t),document.body.appendChild(i),i.click(),e.$refs[t+"_display"].style.display="block",e.$refs[t+"_loading"].style.display="none"}))},loadDetail:function(t){var e=this,a=this.portal+"/data/detail/"+t;a=encodeURI(a),this.$axios.get(a,{headers:{Authorization:"Bearer "+e.$localStorage.get("token")}}).then((function(t){e.Record=t.data,void 0==e.Record.id?(e.Record={},e.Record.id="error",document.title="Error"):(document.title=e.Record.title,e.loadCatalog())})).catch((function(t){}))},loadCatalog:function(){var t=this,e=this.portal+"/data/catalog/"+t.Record.titlecategory;e=encodeURI(e),console.log(e),this.$axios.get(e,{headers:{Authorization:"Bearer "+t.$localStorage.get("token")}}).then((function(e){t.Catalog=e.data})).catch((function(t){}))},updateCoverDisplay:function(){var t=this,e=this.portal+"/data/cover/url";e=encodeURI(e),this.$axios.get(e,{headers:{Authorization:"Bearer "+t.$localStorage.get("token")}}).then((function(e){t.prepareCoverDisplay(e.data)}))},prepareCoverDisplay:function(t){for(var e=0;e<this.Catalog.length;e++){var a=this.Catalog[e].id,i=a.substring(0,5),r=a.substring(5),s="",o=r;4==o.length&&o.length<=6?s=i+"/"+o.substring(0,3)+"/"+o.substring(3)+"/"+a+"/":o.length>=7&&o.length<=9?s=i+"/"+o.substring(0,3)+"/"+o.substring(3,6)+"/"+o.substring(6)+"/"+a+"/":o.length>=9&&o.length<=12?s=i+"/"+o.substring(0,3)+"/"+o.substring(3,6)+"/"+o.substring(6,9)+"/"+o.substring(9)+"/"+a+"/":o.length>=12&&o.length<=15&&(s=i+"/"+o.substring(0,3)+"/"+o.substring(3,6)+"/"+o.substring(6,9)+"/"+o.substring(9,12)+"/"+o.substring(12)+"/"+a+"/");var n=this.Catalog[e].imageurl,l=t+s+a+"_original";void 0!=n&&-1!=n.indexOf(".jpg")?l+=".jpg":l+=".gif";var c=t+s+"/"+a+"_250.png";setTimeout(this.actualCoverDisplay(e,l,n,c),500)}},actualCoverDisplay:function(t,e,a,i){try{var r=new Image;r.src=e;var s=this;r.onerror=function(){var e=new Image;e.src=a;var r=s;e.onerror=function(){var e=new Image;e.src=i;var a=r;e.onerror=function(){},e.onload=function(){a.Catalog[t].imageurl=i}},e.onload=function(){r.Catalog[t].imageurl=a}},r.onload=function(){s.Catalog[t].imageurl=e}}catch(o){}},verifyCreated:function(){var t=this;if(null==this.$localStorage.get("token")||void 0==this.$localStorage.get("token")||""==this.$localStorage.get("token")){if(void 0!=this.$route.query){var e=this.$route.query.AffiliateKey;void 0==e&&(e=this.$route.query.affiliatekey,void 0==e&&(e=this.$route.query.AFFILIATEKEY))}void 0!=e?this.axios.request({url:"/verify/key?AffiliateKey="+e,method:"GET",headers:{"content-type":"application/json"}}).then((function(e){void 0!=e.data.access_token?(t.$localStorage.set("token",e.data.access_token),t.loadDetail(t.$route.params.id)):(alert("You don't have permission to access this service"),t.userSignOut())})).catch((function(t){})):this.axios.request({url:"/verify",method:"GET",headers:{"content-type":"application/json"}}).then((function(e){void 0!=e.data.access_token?(t.$localStorage.set("token",e.data.access_token),t.loadDetail(t.$route.params.id)):(alert("You don't have permission to access this service"),t.userSignOut())})).catch((function(t){}))}else this.loadDetail(this.$route.params.id)},updateImageUrl:function(t){return this.imageroot+t},showDrawer:function(){this.visible=!this.visible}},filters:{removeDot:function(t){if(void 0!=t&&""!=t){var e=t.substring(t.length-1);return"."==e?t.substring(0,t.length-1):t}}},created:function(){var t=this;null!=this.$localStorage.get("token")&&void 0!=this.$localStorage.get("token")&&""!=this.$localStorage.get("token")?this.$axios.get("/info/",{headers:{Authorization:"Bearer "+t.$localStorage.get("token")}}).then((function(e){t.organization=e.data,t.verifyCreated()})).catch((function(e){t.$localStorage.remove("token"),t.verifyCreated()})):this.verifyCreated()}},J=H,Z=(a("f7b7"),Object(c["a"])(J,W,G,!1,null,"50bc6078",null)),Q=Z.exports,X=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-layout",[i("a-layout-header",{staticClass:"top-header"},[i("a-row",{staticClass:"top-header",attrs:{type:"flex",align:"middle",justify:"space-between"}},[i("a-col",{attrs:{span:6,sm:6,xs:4}},[i("img",{staticClass:"header-image",attrs:{src:a("c6d2")},on:{click:function(e){return t.goBrowsePage()}}})]),i("a-col",{attrs:{span:18,sm:18,xs:0}},[i("a-row",{attrs:{type:"flex",justify:"end"}},[i("span",{staticClass:"control-icon ",on:{click:function(e){return t.goBrowsePage()}}},[i("a-icon",{attrs:{type:"unordered-list"}}),t._v("\n            Browse\n          ")],1),i("span",{staticClass:"control-icon control-current",on:{click:function(e){return t.goSearchPage()}}},[i("a-icon",{attrs:{type:"search"}}),t._v("\n            Search\n          ")],1),i("span",{staticClass:"control-icon",on:{click:function(e){return t.handleOrganizationInfo()}}},[i("a-icon",{attrs:{type:"bank",title:"Institution Information"}}),t._v("\n            Institution\n          ")],1),i("span",{staticClass:"control-icon",on:{click:function(e){return t.logout()}}},[i("a-icon",{attrs:{type:"logout"}}),t._v("\n            Log out\n          ")],1)])],1),i("a-col",{attrs:{xs:20,sm:0}},[i("a-row",{attrs:{type:"flex",justify:"end"}},[i("a-button",{staticClass:"menu-icon",on:{click:t.showDrawer}},[i("a-icon",{attrs:{type:"menu"}})],1)],1)],1),i("a-drawer",{staticStyle:{"font-size":"22px"},attrs:{title:"WorldLibrary",placement:t.placement,closable:!1,visible:t.visible},on:{close:t.showDrawer}},[i("p",{staticClass:"control-icon ",on:{click:function(e){return t.goBrowsePage()}}},[i("a-icon",{attrs:{type:"unordered-list"}}),t._v("\n          Browse\n        ")],1),i("p",{staticClass:"control-icon control-current",on:{click:function(e){return t.goSearchPage()}}},[i("a-icon",{attrs:{type:"search"}}),t._v("\n          Search\n        ")],1),i("p",{staticClass:"control-icon",on:{click:function(e){return t.handleOrganizationInfo()}}},[i("a-icon",{attrs:{type:"bank",title:"Institution Information"}}),t._v("\n          Institution\n        ")],1),i("p",{staticClass:"control-icon",on:{click:function(e){return t.logout()}}},[i("a-icon",{attrs:{type:"logout"}}),t._v("\n          Log out\n        ")],1)])],1)],1),i("a-layout",[i("a-layout-content",{staticClass:"main-content",attrs:{align:"center"}},[void 0==t.Record.id?i("a-row",{staticStyle:{margin:"150px"}},[i("a-spin",{attrs:{tip:"Loading ..."}})],1):t._e(),void 0!=t.Record.id&&"error"==t.Record.id?i("a-row",{staticStyle:{margin:"150px"}},[i("a-icon",{staticStyle:{"font-size":"72pt",margin:"25px"},attrs:{type:"warning"}}),i("div",{staticStyle:{"font-size":"14pt"}},[t._v("\n          The record you have requested does not exists.\n        ")])],1):t._e(),void 0!=t.Record.id&&"error"!=t.Record.id?i("a-row",[i("a-col",{staticStyle:{"margin-bottom":"16px"},attrs:{sm:0,xs:24}},[i("a-col",{staticClass:"mobile-left",attrs:{sm:0,xs:24}},[i("a-row",{staticClass:"record"},[i("a-col",{attrs:{xs:24,sm:16,md:18,lg:20,align:"start"}},[i("a-row",{staticClass:"record-title"},[i("a-col",[t._v(t._s(t.Record.title))])],1),i("a-col",{attrs:{xs:24,sm:8,md:6,lg:4,align:"start"}},[i("img",{staticClass:"cover-size",attrs:{src:t.updateImageUrl(t.Record.image)}})])],1)],1)],1)],1),i("a-col",{attrs:{xs:24,sm:0}},[i("a-col",{attrs:{xs:24}},[""!=t.master?i("a-row",{staticClass:"record-extra-master",attrs:{type:"flex",justify:"start"}},[i("span",{on:{click:t.loadCatalog}},[t._v("This title has multiple editions")])]):t._e()],1),i("a-col",{attrs:{xs:24}},[i("a-row",{staticClass:"record-extra",attrs:{type:"flex",justify:"start"}},[i("a-col",{attrs:{xs:24}},[i("a-row",{staticClass:"record-extra",attrs:{type:"flex",justify:"start"}},[i("span",{staticClass:"record-section-title"},[t._v("Publication Year")])])],1),i("a-col",{attrs:{xs:24}},[i("a-row",{staticClass:"record-extra",attrs:{type:"flex",justify:"start"}},[t.Record.year>0?i("span",[t._v(t._s(t.Record.year))]):t._e(),t.Record.year>0?i("span",[t._v("; ")]):t._e()])],1),i("a-col",{attrs:{xs:24}},[i("a-row",{staticClass:"record-extra",attrs:{type:"flex",justify:"start"}},[t.Record.page>0?i("span",[t._v(" "+t._s(t.Record.page)+" Pages")]):t._e()])],1)],1),t.Record.series?i("a-row",{staticClass:"record-extra-series",attrs:{type:"flex",justify:"start"}},[i("span",[t._v(t._s(t.Record.series))])]):t._e()],1),i("a-col",{attrs:{xs:24}},[void 0!=t.Record.language&&t.Record.language.length>0?i("a-row",{staticStyle:{"margin-top":"15px"},attrs:{type:"flex",justify:"start"}},[i("a-col",{attrs:{xs:24}},[i("a-row",{attrs:{type:"flex",justify:"start"}},[i("span",{staticClass:"record-section-title"},[t._v("Language")])])],1),i("a-col",{attrs:{xs:24}},[i("a-row",{attrs:{type:"flex",justify:"start"}},t._l(t.Record.language,(function(e,a){return i("span",{staticClass:"record-common-item"},[i("span",{directives:[{name:"show",rawName:"v-show",value:a>0,expression:"cindex > 0"}]},[t._v(", ")]),t._v("\n                    "+t._s(e)+"\n                  ")])})),0)],1)],1):t._e()],1),i("a-col",{attrs:{xs:24}},[void 0!=t.Record.contributor&&t.Record.contributor.length>0?i("a-row",{staticStyle:{"margin-top":"15px"},attrs:{type:"flex",justify:"start"}},[i("a-col",{attrs:{xs:24}},[i("a-row",{attrs:{type:"flex",justify:"start"}},[i("span",{staticClass:"record-section-title"},[t._v("Contributor")])])],1),i("a-col",t._l(t.Record.contributor,(function(e,a){return i("span",{staticClass:"record-section-item",on:{click:function(a){return t.searchSubCategory("contributor",e)}}},[t._v("\n                  "+t._s(e)+"\n                ")])})),0)],1):t._e()],1),i("a-col",{attrs:{xs:24}},[void 0!=t.Record.publisher&&t.Record.publisher.length>0?i("a-row",{staticStyle:{"margin-top":"15px"},attrs:{type:"flex",justify:"start"}},[i("a-col",{attrs:{xs:24}},[i("a-row",{attrs:{type:"flex",justify:"start"}},[i("span",{staticClass:"record-section-title"},[t._v("Publisher")])])],1),i("a-col",t._l(t.Record.publisher,(function(e,a){return i("span",{staticClass:"record-section-item",on:{click:function(a){return t.searchSubCategory("publisher",e)}}},[t._v("\n                  "+t._s(e)+"\n                ")])})),0)],1):t._e()],1),i("a-col",{attrs:{xs:24}},[void 0!=t.Record.collection&&t.Record.collection.length>0?i("a-row",{staticStyle:{"margin-top":"15px"},attrs:{type:"flex",justify:"start"}},[i("a-col",{attrs:{xs:24}},[i("a-row",{attrs:{type:"flex",justify:"start"}},[i("span",{staticClass:"record-section-title"},[t._v("Collection")])])],1),i("a-col",{attrs:{xs:24}},[i("a-row",{attrs:{type:"flex",justify:"start"}},t._l(t.Record.collection,(function(e,a){return i("span",{staticClass:"record-section-item",on:{click:function(a){return t.searchSubCategory("collection",e)}}},[t._v("\n                    "+t._s(e)+"\n                  ")])})),0)],1)],1):t._e()],1),i("a-col",{attrs:{xs:24}},[void 0!=t.Record.subject&&t.Record.subject.length>0?i("a-row",{staticStyle:{"margin-top":"15px"},attrs:{type:"flex",justify:"start"}},[i("a-col",{attrs:{xs:24}},[i("a-row",{attrs:{type:"flex",justify:"start"}},[i("span",{staticClass:"record-section-title"},[t._v("Subject")])])],1),i("a-col",{attrs:{xs:24}},[i("a-row",{attrs:{type:"flex",justify:"start"}},t._l(t.Record.subject,(function(e,a){return i("span",{staticClass:"record-section-item",on:{click:function(a){return t.searchSubCategory("subject",e)}}},[t._v("\n                    "+t._s(e)+"\n                  ")])})),0)],1)],1):t._e()],1),i("a-col",{attrs:{xs:24}},[i("a-row",{staticClass:"record-action-section",attrs:{title:"Click to download the PDF",type:"flex",justify:"start"}},[i("span",{ref:t.Record.id+"_display",staticClass:"record-action"},[i("a",{attrs:{title:"Click to download the PDF"},on:{click:function(e){return t.checkDownload(t.Record.id)}}},[t._v("Download PDF\n                  "),t.Record.size?i("span",[t._v("("+t._s(t._f("removeDot")(t.Record.size))+")")]):t._e()])]),i("div",{ref:t.Record.id+"_loading",staticClass:"record-action-loading"},[i("a-spin",{attrs:{tip:"Loading ..."}})],1)])],1)],1),i("a-col",{attrs:{xs:0,sm:24}},[i("a-col",{attrs:{xs:2,sm:3,md:4}}),i("a-col",{attrs:{xs:20,sm:18,md:16}},[i("a-row",{staticClass:"record"},[i("a-col",{attrs:{xs:12,sm:14,md:16,lg:16,align:"start"}},[i("a-row",{staticClass:"record-title"},[i("a-col",[t._v(t._s(t.Record.title))])],1),""!=t.master?i("a-row",{staticClass:"record-extra-master"},[i("span",{on:{click:t.loadCatalog}},[t._v("This title has multiple editions")])]):t._e(),i("a-row",{staticClass:"record-extra"},[t.Record.year>0?i("span",[t._v(t._s(t.Record.year))]):t._e(),t.Record.year>0?i("span",[t._v("; ")]):t._e(),t.Record.page>0?i("span",[t._v(" "+t._s(t.Record.page)+" Pages")]):t._e()]),t.Record.series?i("a-row",{staticClass:"record-extra-series"},[i("span",[t._v(t._s(t.Record.series))])]):t._e(),void 0!=t.Record.language&&t.Record.language.length>0?i("a-row",{staticStyle:{"margin-top":"15px"}},[i("a-col",[i("span",{staticClass:"record-section-title"},[t._v("Language")])]),t._l(t.Record.language,(function(e,a){return i("span",{staticClass:"record-common-item"},[i("span",{directives:[{name:"show",rawName:"v-show",value:a>0,expression:"cindex > 0"}]},[t._v(", ")]),t._v("\n                    "+t._s(e)+"\n                  ")])}))],2):t._e(),void 0!=t.Record.contributor&&t.Record.contributor.length>0?i("a-row",{staticStyle:{"margin-top":"15px"}},[i("a-col",[i("span",{staticClass:"record-section-title"},[t._v("Contributor")])]),i("a-col",t._l(t.Record.contributor,(function(e,a){return i("span",{staticClass:"record-section-item",on:{click:function(a){return t.searchSubCategory("contributor",e)}}},[t._v("\n                      "+t._s(e)+"\n                    ")])})),0)],1):t._e(),void 0!=t.Record.publisher&&t.Record.publisher.length>0?i("a-row",{staticStyle:{"margin-top":"15px"}},[i("a-col",[i("span",{staticClass:"record-section-title"},[t._v("Publisher")])]),i("a-col",t._l(t.Record.publisher,(function(e,a){return i("span",{staticClass:"record-section-item",on:{click:function(a){return t.searchSubCategory("publisher",e)}}},[t._v("\n                      "+t._s(e)+"\n                    ")])})),0)],1):t._e(),void 0!=t.Record.collection&&t.Record.collection.length>0?i("a-row",{staticStyle:{"margin-top":"15px"}},[i("a-col",[i("span",{staticClass:"record-section-title"},[t._v("Collection")])]),i("a-col",t._l(t.Record.collection,(function(e,a){return i("span",{staticClass:"record-section-item",on:{click:function(a){return t.searchSubCategory("collection",e)}}},[t._v("\n                      "+t._s(e)+"\n                    ")])})),0)],1):t._e(),void 0!=t.Record.subject&&t.Record.subject.length>0?i("a-row",{staticStyle:{"margin-top":"15px"}},[i("a-col",[i("span",{staticClass:"record-section-title"},[t._v("Subject")])]),i("a-col",t._l(t.Record.subject,(function(e,a){return i("span",{staticClass:"record-section-item",on:{click:function(a){return t.searchSubCategory("subject",e)}}},[t._v("\n                      "+t._s(e)+"\n                    ")])})),0)],1):t._e(),i("a-row",{staticClass:"record-action-section",attrs:{title:"Click to download the PDF"}},[i("span",{ref:t.Record.id+"_display",staticClass:"record-action"},[i("a",{attrs:{title:"Click to download the PDF"},on:{click:function(e){return t.checkDownload(t.Record.id)}}},[t._v("Download PDF\n                      "),t.Record.size?i("span",[t._v("("+t._s(t._f("removeDot")(t.Record.size))+")")]):t._e()])]),i("div",{ref:t.Record.id+"_loading",staticClass:"record-action-loading"},[i("a-spin",{attrs:{tip:"Loading ..."}})],1)])],1),i("a-col",{attrs:{xs:12,sm:10,md:8,lg:8,align:"center"}},[i("img",{staticClass:"cover-size",attrs:{src:t.updateImageUrl(t.Record.image)}})])],1)],1),i("a-col",{attrs:{xs:2,sm:3,md:4}})],1)],1):t._e(),i("a-row",[i("a-col",{attrs:{xs:2,sm:3,md:4}}),i("a-col",{attrs:{xs:24,sm:18,md:16,align:"start"}},[void 0!=t.Record.description?i("a-divider",{attrs:{orientation:"left"}},[t._v("Description")]):t._e(),void 0!=t.Record.description?i("a-collapse",{attrs:{defaultActiveKey:"1",bordered:!1}},[i("span",{domProps:{innerHTML:t._s(t.Record.description)}}),1==t.displayMore?i("span",{domProps:{innerHTML:t._s(t.Record.more)}}):t._e(),void 0!=t.Record.more&&t.Record.more.length>0&&0==t.displayMore?i("span",{staticClass:"display-more",on:{click:t.loadMoreDescription}},[t._v("Read More")]):t._e(),void 0!=t.Record.more&&t.Record.more.length>0&&1==t.displayMore?i("span",{staticClass:"display-more",on:{click:t.loadMoreDescription}},[t._v("Read Less")]):t._e()]):t._e()],1),i("a-col",{attrs:{xs:2,sm:3,md:4}})],1),void 0!=t.Record.id&&"error"!=t.Record.id?i("a-row",{staticClass:"suggestion-section"},[i("a-col",{attrs:{xs:2,sm:3,md:4}}),t.Similiar.length>0?i("a-col",{attrs:{xs:24,sm:18,md:16}},[i("a-divider",{attrs:{orientation:"left"}},[t._v("Suggested Titles")]),i("carousel",{attrs:{perPageCustom:[[1140,6],[960,5],[720,4],[540,3]],"mouse-drag":!0}},t._l(t.Similiar,(function(e,a){return i("slide",[i("img",{staticClass:"sugggest-cover-size",attrs:{title:e.title,src:t.updateImageUrl(e.image)},on:{click:function(a){return t.detail(e.id)}}})])})),1)],1):t._e(),i("a-col",{attrs:{xs:2,sm:3,md:4}})],1):t._e()],1),i("a-layout-footer",{staticClass:"main-footer"},[i("div",{attrs:{align:"center"}},[t._v("\n        Copyright © 2020 World Library. All rights reserved.\n      ")])])],1)],1)},tt=[],et={},at={},it=[],rt={data:function(){return{organization:{},settings:{centerMode:!0,centerPadding:"20px",focusOnSelect:!0,infinite:!0,slidesToShow:3,speed:500},Record:at,Catalog:it,Similiar:et,master:"",headstyle:{"font-size":"10pt"},bodystyle:{height:"220px","text-align":"center"},displayMore:!1,visible:!1,placement:"left"}},methods:{handleOrganizationInfo:function(){var t=this,e=this.$createElement;this.$info({title:"Institution Information",content:e("div",{},[e("p",t.organization.organization),e("p",t.organization.ip)]),onOk:function(){}})},logout:function(){var t=this;this.$confirm({title:"Are you sure you want to log out?",content:"",iconType:"warning",okText:"Yes",cancelText:"No",onOk:function(){t.userSignOut()},onCancel:function(){}})},userSignOut:function(){var t=this.$localStorage.get("token"),e=this;this.$localStorage.remove("token"),this.axios.request({url:"/revoke/"+t,method:"GET",headers:{"content-type":"application/json"}}).then((function(t){e.$router.push("/portal/")})).catch((function(t){console.log(t),e.$router.push("/portal/")}))},goBrowsePage:function(){this.$router.push("/browse/").catch((function(t){}))},goSearchPage:function(){this.$router.push("/search/").catch((function(t){}))},detail:function(t){this.Similiar=[],this.loadDetail(t)},loadMoreDescription:function(){this.displayMore?this.displayMore=!1:this.displayMore=!0},loadCatalog:function(){var t=this.$router.resolve({name:"catalog",params:{id:this.master}}),e=t.href;window.open(e,"_blank")},loadDuplicate:function(){var t=this,e=this.portal+"/data/catalog/"+t.Record.titlecategory;e=encodeURI(e),this.$axios.get(e,{headers:{Authorization:"Bearer "+t.$localStorage.get("token")}}).then((function(e){t.Catalog=e.data;for(var a=0;a<t.Catalog.length;a++){var i=t.Catalog[a];if(2!=i.master){t.master=i.id;break}}})).catch((function(t){}))},loadSimiliar:function(){var t=this,e=this.portal+"/data/similiar/"+t.Record.id+"?r=21";e=encodeURI(e);var a="";void 0!=this.organization.index&&(a=this.organization.index),this.$axios.get(e,{headers:{Authorization:"Bearer "+t.$localStorage.get("token"),index:a}}).then((function(e){var a=e.data.response.docs;t.Similiar=[];for(var i=0;i<a.length;i++){var r=a[i].id;r!=t.Record.id&&t.Similiar.push(a[i])}})).catch((function(t){}))},loadDetail:function(t){var e=this,a=this.portal+"/data/detail/"+t;a=encodeURI(a);var i="";void 0!=this.organization.index&&(i=this.organization.index),this.$axios.get(a,{headers:{Authorization:"Bearer "+e.$localStorage.get("token"),index:i}}).then((function(t){if(e.Record=t.data,void 0==e.Record.id)e.Record={},e.Record.id="error",document.title="Error";else{document.title=e.Record.title;var a=500;if(void 0!=e.Record.description&&e.Record.description.length>a){var i=e.Record.description.substring(a+1);e.Record.description=e.Record.description.substring(0,a),e.Record.more=i}window.scrollTo(0,0),e.loadSimiliar(),e.loadDuplicate()}})).catch((function(t){})),this.updateURL(t)},searchSubCategory:function(t,e){if(e=encodeURI(e),"contributor"==t){var a=this.$router.resolve({name:"searchcustom",params:{year:"*",language:"*",collection:"*",publisher:"*",subject:"*",contributor:e,start:"1",rows:"10",query:"*"}}),i=a.href;window.open(i,"_blank")}else if("subject"==t){var r=this.$router.resolve({name:"searchcustom",params:{year:"*",language:"*",collection:"*",publisher:"*",subject:e,contributor:"*",start:"1",rows:"10",query:"*"}}),s=r.href;window.open(s,"_blank")}else if("publisher"==t){var o=this.$router.resolve({name:"searchcustom",params:{year:"*",language:"*",collection:"*",publisher:e,subject:"*",contributor:"*",start:"1",rows:"10",query:"*"}}),n=o.href;window.open(n,"_blank")}else if("collection"==t){var l=this.$router.resolve({name:"searchcustom",params:{year:"*",language:"*",collection:e,publisher:"*",subject:"*",contributor:"*",start:"1",rows:"10",query:"*"}}),c=l.href;window.open(c,"_blank")}},updateURL:function(t){history.pushState({},null,"/#/detail/"+t)},checkDownload:function(t){this.$refs[t+"_display"].style.display="none",this.$refs[t+"_loading"].style.display="block";var e=this,a=this.portal+"/data/checkpdf/"+t;this.$axios.get(a,{headers:{Authorization:"Bearer "+e.$localStorage.get("token")}}).then((function(a){1==a.data?e.downloadPdf(t):e.downloadMirror(t)})).catch((function(t){}))},downloadMirror:function(t){this.$refs[t+"_display"].style.display="block",this.$refs[t+"_loading"].style.display="none";var e=this,a=this.portal+"/data/download/detail/"+t;this.$axios.get(a,{headers:{Authorization:"Bearer "+e.$localStorage.get("token")}}).then((function(e){window.open(e.data,t)})).catch((function(t){}))},downloadPdf:function(t){var e=this,a=this.portal+"/data/download/detail/"+t;this.$axios({url:a,method:"GET",responseType:"plain/text",headers:{Authorization:"Bearer "+e.$localStorage.get("token")}}).then((function(a){var i=document.createElement("a");i.href=a.data,i.setAttribute("target",t),document.body.appendChild(i),i.click(),e.$refs[t+"_display"].style.display="block",e.$refs[t+"_loading"].style.display="none"}))},updateCoverDisplay:function(){var t=this,e=this.portal+"/data/cover/url";e=encodeURI(e),this.$axios.get(e,{headers:{Authorization:"Bearer "+t.$localStorage.get("token")}}).then((function(e){t.prepareCoverDisplay(e.data)}))},prepareCoverDisplay:function(t){for(var e=0;e<this.Similiar.length;e++){var a=this.Similiar[e].id,i=a.substring(0,5),r=a.substring(5),s="",o=r;4==o.length&&o.length<=6?s=i+"/"+o.substring(0,3)+"/"+o.substring(3)+"/"+a+"/":o.length>=7&&o.length<=9?s=i+"/"+o.substring(0,3)+"/"+o.substring(3,6)+"/"+o.substring(6)+"/"+a+"/":o.length>=9&&o.length<=12?s=i+"/"+o.substring(0,3)+"/"+o.substring(3,6)+"/"+o.substring(6,9)+"/"+o.substring(9)+"/"+a+"/":o.length>=12&&o.length<=15&&(s=i+"/"+o.substring(0,3)+"/"+o.substring(3,6)+"/"+o.substring(6,9)+"/"+o.substring(9,12)+"/"+o.substring(12)+"/"+a+"/");var n=this.Similiar[e].imageurl,l=t+s+a+"_original";void 0!=n&&-1!=n.indexOf(".jpg")?l+=".jpg":l+=".gif";var c=t+s+"/"+a+"_250.png";this.actualCoverDisplay(e,l,n,c)}},actualCoverDisplay:function(t,e,a,i){try{var r=new Image;r.src=e;var s=this;r.onerror=function(){var e=new Image;e.src=a;var r=s;e.onerror=function(){var e=new Image;e.src=i;var a=r;e.onerror=function(){},e.onload=function(){a.Similiar[t].imageurl=i}},e.onload=function(){r.Similiar[t].imageurl=a}},r.onload=function(){s.Similiar[t].imageurl=e}}catch(o){}},updateRecordCoverDisplay:function(){var t=this,e=this.portal+"/data/cover/url";e=encodeURI(e),this.$axios.get(e,{headers:{Authorization:"Bearer "+t.$localStorage.get("token")}}).then((function(e){t.prepareRecordCoverDisplay(e.data)}))},prepareRecordCoverDisplay:function(t){var e=this.Record.id,a=e.substring(0,5),i=e.substring(5),r="",s=i;4==s.length&&s.length<=6?r=a+"/"+s.substring(0,3)+"/"+s.substring(3)+"/"+e+"/":s.length>=7&&s.length<=9?r=a+"/"+s.substring(0,3)+"/"+s.substring(3,6)+"/"+s.substring(6)+"/"+e+"/":s.length>=9&&s.length<=12?r=a+"/"+s.substring(0,3)+"/"+s.substring(3,6)+"/"+s.substring(6,9)+"/"+s.substring(9)+"/"+e+"/":s.length>=12&&s.length<=15&&(r=a+"/"+s.substring(0,3)+"/"+s.substring(3,6)+"/"+s.substring(6,9)+"/"+s.substring(9,12)+"/"+s.substring(12)+"/"+e+"/");var o=this.Record.imageurl,n=t+r+e+"_original";void 0!=o&&-1!=o.indexOf(".jpg")?n+=".jpg":n+=".gif";var l=t+r+"/"+e+"_250.png";try{var c=new Image;c.src=n;var u=this;c.onerror=function(){var t=new Image;t.src=o;var e=u;t.onerror=function(){var t=new Image;t.src=l;var a=e;t.onerror=function(){},t.onload=function(){a.Record.imageurl=l}},t.onload=function(){e.Record.imageurl=o}},c.onload=function(){u.Record.imageurl=n}}catch(h){}},verifyCreated:function(){var t=this;if(null==this.$localStorage.get("token")||void 0==this.$localStorage.get("token")||""==this.$localStorage.get("token")){if(void 0!=this.$route.query){var e=this.$route.query.AffiliateKey;void 0==e&&(e=this.$route.query.affiliatekey,void 0==e&&(e=this.$route.query.AFFILIATEKEY))}void 0!=e?this.axios.request({url:"/verify/key?AffiliateKey="+e,method:"GET",headers:{"content-type":"application/json"}}).then((function(e){void 0!=e.data.access_token?(t.$localStorage.set("token",e.data.access_token),t.loadDetail(t.$route.params.id)):(alert("You don't have permission to access this service"),t.userSignOut())})).catch((function(t){})):this.axios.request({url:"/verify",method:"GET",headers:{"content-type":"application/json"}}).then((function(e){void 0!=e.data.access_token?(t.$localStorage.set("token",e.data.access_token),t.loadDetail(t.$route.params.id)):(alert("You don't have permission to access this service"),t.userSignOut())})).catch((function(t){}))}else this.loadDetail(this.$route.params.id)},updateImageUrl:function(t){return this.imageroot+t},showDrawer:function(){this.visible=!this.visible}},filters:{removeDot:function(t){if(void 0!=t&&""!=t){var e=t.substring(t.length-1);return"."==e?t.substring(0,t.length-1):t}}},mounted:function(){},created:function(){var t=this;null!=this.$localStorage.get("token")&&void 0!=this.$localStorage.get("token")&&""!=this.$localStorage.get("token")?this.$axios.get("/info/",{headers:{Authorization:"Bearer "+t.$localStorage.get("token")}}).then((function(e){t.organization=e.data,t.verifyCreated()})).catch((function(e){t.$localStorage.remove("token"),t.verifyCreated()})):this.verifyCreated()}},st=rt,ot=(a("1ce1"),Object(c["a"])(st,X,tt,!1,null,"09d540d5",null)),nt=ot.exports,lt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{height:"100%"},attrs:{height:"100%"}},[i("a-row",{staticStyle:{height:"100%"},attrs:{type:"flex",height:"100%",align:"middle"}},[i("a-col",{attrs:{xs:2,sm:4,md:6,lg:8}}),i("a-col",{attrs:{xs:20,sm:16,md:12,lg:8}},[i("a-form",{attrs:{layout:"inline"}},[i("a-form-item",[i("img",{staticClass:"login-image",attrs:{src:a("7416")}}),i("a-menu",{staticStyle:{marginTop:"40px",marginBottom:"40px"},attrs:{mode:"horizontal"},model:{value:t.current,callback:function(e){t.current=e},expression:"current"}},[!0===t.ippass?i("a-menu-item",{key:"ip"},[t._v("\n              Login with IP address\n            ")]):t._e(),i("a-menu-item",{key:"account"},[t._v("\n              Login with account\n            ")])],1),i("a-col",{staticClass:"login-table"},[i("a-row",{attrs:{type:"flex",justify:"center"}},["ip"===t.current[0]&&!1===t.ippass?i("a-col",{staticClass:"ip-failed",attrs:{span:24}},[t._v("\n                "+t._s(t.ipfailed)+"\n              ")]):t._e(),"ip"===t.current[0]&&!0===t.ippass?i("a-col",{attrs:{span:24}},[i("a-row",{attrs:{type:"flex",justify:"center"}},[i("a-col",{staticStyle:{marginBottom:"18px"},attrs:{sm:24,xs:24}},[i("a-row",{attrs:{type:"flex",justify:"center"}},[i("span",{staticClass:"ip-success-text"},[i("a-icon",{staticClass:"ip-success-text-color",attrs:{type:"safety"}}),t._v("\n                        Your IP allows login.")],1)])],1),i("a-col",{attrs:{sm:24,xs:24}},[i("a-row",{attrs:{type:"flex",justify:"center"}},[i("a-button",{attrs:{type:"primary","html-type":"submit",block:"",size:"large"},on:{click:t.loginIP}},[t._v("\n                        Log in\n                      ")])],1)],1)],1)],1):t._e()],1),"account"===t.current[0]?i("a-col",[i("div",{staticClass:"login-failed"},[t._v("\n                "+t._s(t.loginfailed)+"\n              ")]),i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"Please input your username!"}]}],expression:"[\n                  'username',\n                  {\n                    rules: [\n                      {\n                        required: true,\n                        message: 'Please input your username!'\n                      }\n                    ]\n                  }\n                ]"}],attrs:{placeholder:"Username"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}},[i("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1),i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"Please input your Password!"}]}],expression:"[\n                  'password',\n                  {\n                    rules: [\n                      {\n                        required: true,\n                        message: 'Please input your Password!'\n                      }\n                    ]\n                  }\n                ]"}],attrs:{type:"password",placeholder:"Password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[i("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1),i("a-row",[i("a-col",{attrs:{span:8,align:"start"}}),i("a-col",{staticStyle:{"text-align":"right"},attrs:{span:16,align:"end"}},[i("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"default","html-type":"reset"}},[t._v("\n                    Reset\n                  ")]),i("a-button",{attrs:{type:"primary","html-type":"submit"},on:{click:function(e){return t.loginAccount()}}},[t._v("\n                    Log in\n                  ")])],1)],1)],1):t._e(),i("a-divider"),i("p",[t._v("\n              Powered by iGroup Technical Services. Your IP is :\n              "+t._s(t.userip)+"\n            ")])],1)],1)],1)],1),i("a-col",{attrs:{xs:2,sm:4,md:6,lg:8}})],1)],1)},ct=[],ut={data:function(){return{token:"",username:"",password:"",keyfailed:"",loginfailed:"",ipfailed:"",afkey:"",current:["account"],ippass:!1,userip:""}},methods:{loginKey:function(){var t=this;t.ipfailed="",t.keyfailed="",t.loginfailed="",t.$localStorage.remove("token"),""!=t.afkey&&this.axios.request({url:"/verify/key?AffiliateKey="+t.afkey,method:"GET",headers:{"content-type":"application/json"}}).then((function(e){void 0!=e.data.access_token?(t.$localStorage.set("token",e.data.access_token),t.$router.push("/browse?"+new Date)):t.keyfailed="Sorry, the Affiliate Key is invalid."})).catch((function(e){t.keyfailed="Sorry, the Affiliate Key is invalid."}))},loginVerify:function(){var t=this;t.ipfailed="",t.keyfailed="",t.loginfailed="",t.$localStorage.remove("token"),this.axios.request({url:"/verify",method:"GET",headers:{"content-type":"application/json"}}).then((function(e){void 0!=e.data.access_token?(t.$localStorage.set("token",e.data.access_token),t.ippass=!0,t.current[0]="ip"):(t.ippass=!1,t.current[0]="account",t.ipfailed="Sorry, your IP address is not registered.")})).catch((function(e){t.ippass=!1,t.current[0]="account",t.ipfailed="Sorry, your IP address is not registered."}))},loginIP:function(){this.ippass&&this.$router.push("/browse?"+new Date)},loginAccount:function(){var t=this;t.ipfailed="",t.keyfailed="",t.loginfailed="",t.$localStorage.remove("token"),this.axios.request({url:"/verify/login",method:"POST",headers:{"content-type":"application/json"},params:{username:t.username,password:t.password}}).then((function(e){void 0!=e.data.access_token?(t.$localStorage.set("token",e.data.access_token),t.$router.push("/browse?"+new Date)):t.loginfailed="Sorry, Wrong Combination Of Username And Password."})).catch((function(e){t.loginfailed="Sorry, Wrong Combination Of Username And Password."}))},getUserIP:function(){var t=this,e="/ip";this.axios.request(e,{method:"GET"},{headers:{"content-type":"application/json"}}).then((function(e){console.log(e),t.userip=e.data}))}},created:function(){this.loginVerify(),this.getUserIP()}},ht=ut,dt=(a("5338"),Object(c["a"])(ht,lt,ct,!1,null,null,null)),pt=dt.exports;i["a"].use(d["a"]);var gt=[{name:"login",path:"/login",component:pt,meta:{title:"World Library"}},{name:"search",path:"/search",component:U,meta:{title:"World Library"}},{name:"searchcustom",path:"/search/:year/:language/:collection/:publisher/:subject/:contributor/:start/:rows/:query",component:U,meta:{title:"World Library"}},{name:"browse",path:"/browse",component:D,meta:{title:"World Library"}},{name:"browsecustom",path:"/browse/:collection",component:D,meta:{title:"World Library"}},{name:"catalog",path:"/catalog/:id",component:Q,meta:{title:"World Library"}},{name:"detail",path:"/detail/:id",component:nt,meta:{title:"World Library"}},{path:"*",component:pt,meta:{title:"World Library"}}],ft=new d["a"]({routes:gt}),mt=ft,yt=(a("202f"),a("f8ec")),vt=a.n(yt),bt=a("bc3a"),_t=a.n(bt),wt=a("a7fe"),xt=a.n(wt),St=a("ead5"),kt=a.n(St),Ct=a("0a63"),Ft=a.n(Ct),jt=a("3a81"),Dt=(a("d06d"),a("0874"));a("68df");i["a"].component("v-icon",Dt["a"]),i["a"].use(Ft.a),i["a"].use(jt["a"]),i["a"].config.productionTip=!1,i["a"].prototype.$axios=_t.a,i["a"].use(r["a"]),i["a"].use(xt.a,_t.a),i["a"].use(vt.a),i["a"].use(kt.a),i["a"].mixin({data:function(){return{portal:"/api",imageroot:"https://database-download.worldlibrary.org"}}}),i["a"].filter("capitalize",(function(t){return t?(t=t.toString(),t.charAt(0).toUpperCase()+t.slice(1)):""})),i["a"].filter("uppercase",(function(t){return t?(t=t.toString(),t.toUpperCase()):""})),new i["a"]({router:mt,render:function(t){return t(h)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var i=a("e332"),r=a.n(i);r.a},"68df":function(t,e,a){},7416:function(t,e,a){t.exports=a.p+"img/WorldLibrary_NEWLogo_Background.d4a5f452.png"},"7fbc":function(t,e,a){},bdd9:function(t,e,a){},c6d2:function(t,e,a){t.exports=a.p+"img/WorldLibrary_NEWLogo.fd76add6.png"},d577:function(t,e,a){"use strict";var i=a("bdd9"),r=a.n(i);r.a},decd:function(t,e,a){"use strict";var i=a("057e"),r=a.n(i);r.a},e332:function(t,e,a){},f7b7:function(t,e,a){"use strict";var i=a("7fbc"),r=a.n(i);r.a}});